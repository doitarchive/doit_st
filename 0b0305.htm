<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!-- last modified on 23.05.2004 -->
<html>
<head>
<title>
DOIT_ST - Tips u. Tricks zur Atari Serie: HD Modul
</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Generator" content="UDO6 PL14 for TOS">
<meta name="Email" content="doit@doitarchive.de">
<link rev=made href="mailto:doit@doitarchive.de" title="E-Mail">
<link rel=home href="doitst1h.htm" title="Homepage">
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" alink="#FF0000" vlink="#800080">

<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" border=0 width="24" height="24"></a>
<a href="0b03.htm" target="UDOcon"><img src="udo_up.gif" alt="HD Disk ST" border=0 width="24" height="24"></a>
<a href="0b0304.htm" target="UDOcon"><img src="udo_lf.gif" alt="FAB HD Modul" border=0 width="24" height="24"></a>
<a href="0b0306.htm" target="UDOcon"><img src="udo_rg.gif" alt="ED Modul" border=0 width="24" height="24"></a>
</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr>
<td valign=top width="8">&nbsp;</td><td valign=top width="100%">
<h1><a name="HD_20Modul">11.3.5 HD Modul</a></h1>
<p align=center><img src="image/sline.gif" border=0 width="640" height="2"></p><br>
<p><tt> HD-Modul ohne viel Aufwand </tt>
<br>
<br>
</p>
<p><img src="image/deutsch.gif" border=0 width="35" height="22"></p><br>
<p>
<br>
</p>
<p><b> Wer benutzt noch 720K <a href="0b04.htm" target="UDOcon">Disketten</a>? </b>
<br>
</p>
<p>Wenn man sich heute auf die Suche nach Leerdisketten macht findet
man seltenst noch DD-<a href="0b04.htm" target="UDOcon">Disketten</a> mit einer Speicherkapazit&auml;t von
720 KB. HD-<a href="0b.htm" target="UDOcon">Diskettenlaufwerke</a> k&ouml;nnen das Doppelte der Datenmenge
erfassen. Leider arbeiten &auml;ltere Atari Computer von Haus aus
nicht mit solchen HD-Laufwerken. Entsprechende Erweiterungen waren
h&auml;ufig recht kostspielig.
<br>
</p>
<p>
<br><b> Laufwerkselektronik </b>
<br>
</p>
<p>Um zu sparen (Schalter bzw. Lichtschranke, Auswerteelektronik)
haben die Hersteller diese f&uuml;r PC &uuml;berfl&uuml;ssigen Dinge
weggelassen. F&uuml;r heute 'exotische' Laufwerke, die das HD-Signal
noch selbst erkennen, wird das HD-Loch nat&uuml;rlich noch
ben&ouml;tigt - auf einem PC/MegaSTE/TT oder einem FALCON/MILAN wird
es weder abgefragt noch ben&ouml;tigt. Im Falcon kann man beide
Laufwerks- typen (mit/ohne HD-Erkennung) einsetzten, das TOS 4.04
'erwartet' aber ein Standard-PC-Laufwerk ohne HD-Erkennung.
<br>
</p>
<p>Und weil die DD/HD-Erkennung vom Laufwerk nicht mehr benutzt wird,
kann man, wie Bernd M&auml;dicke bemerkte, auf diesen Rechnern
durchaus eine DD-Disk mit HD Formatieren (und umgekehrt) - die
Datensicherheit mal aussen vor gelassen.
<br>
</p>
<p>
<br>
<br><b> Funktionsweise </b>
<br>
</p>
<p>Ein mit 8 MHz getakteter Floppycontroller unterh&auml;lt sich mit
dem Diskettenlaufwerk mit einer Daten&uuml;bertragungsrate von 250
KBit/s. Damit l&auml;&szlig;t sich eine mit 300 U/Min. laufende
Diskette in 9, 10, m&ouml;glicherweise 11 Sektoren einteilen. Somit
stehen bei 80 Spuren ca. 800 KB Speicherplatz auf der Diskette zur
Verf&uuml;gung.
<br>
</p>
<p>HD-<a href="0b04.htm" target="UDOcon">Disketten</a> bringen auf jeder Spur mindestens 18 Sektoren unter,
also doppelt soviel wie DD-<a href="0b04.htm" target="UDOcon">Disketten</a>. Da HD-<a href="0b04.htm" target="UDOcon">Disketten</a> sich genauso
schnell drehen wie DD-<a href="0b04.htm" target="UDOcon">Disketten</a>, mu&szlig; die
Daten&uuml;bertragungsrate erh&ouml;ht, sprich verdoppelt werden.
Damit der Floppycontroller mit den mit 500 KBit/s heranrauschenden
HD-Daten fertig wird, mu&szlig; seine Taktrate angepa&szlig;t werden.
D.h., man ben&ouml;tigt 16 MHz Takt, anstelle von 8Mhz beim
HD-Betrieb. Ob der Floppycontroller den verdoppelten Takt
vertr&auml;gt, h&auml;ngt vom verwendeten Typ des Controllers ab. Die
Chancen sehen folgenderma&szlig;en aus:
<br>
</p>
<p>
<br>
<br>
</p>
<p>
<br>
</p>
<div align=center><table border=1 frame=box>
<caption align=bottom>Tabelle 65: Floppycontroller und HD Modus</caption>
<tr>
  <td align=left valign=top>Controller Typ</td>
  <td align=left valign=top>Funktion in %</td>
  <td align=left valign=top>Funktion allgemein</td>
</tr>
<tr>
  <td align=left valign=top></td>
  <td align=left valign=top></td>
  <td align=left valign=top></td>
</tr>
<tr>
  <td align=left valign=top>WVD 1772 00-02</td>
  <td align=left valign=top>-</td>
  <td align=left valign=top>-</td>
</tr>
<tr>
  <td align=left valign=top>WD 1772 02-02</td>
  <td align=left valign=top>80 %</td>
  <td align=left valign=top>x</td>
</tr>
<tr>
  <td align=left valign=top>VLSI 1772 02</td>
  <td align=left valign=top>50 %</td>
  <td align=left valign=top>x</td>
</tr>
<tr>
  <td align=left valign=top>Ajax Chip</td>
  <td align=left valign=top>100%</td>
  <td align=left valign=top>xx</td>
</tr>
</table></div>

<p>
<br>
<br><b> Der Umbau </b>
</p>
<p>Bei dieser HD-L&ouml;sung mu&szlig;, wie bei allen anderen
HD-Modulen auch, der Takteingang des Floppycontrollers von der
Versorgung durch das Board abgetrennt werden. H&ouml;rt sich immer
schlimmer an, als es wirklich ist.
<br>
</p>
<p>Der Floppycontroller hat 28 Anschl&uuml;sse, von denen hier aber
nur der Pin 18 von Interesse ist. Gez&auml;hlt wird gegen den
Uhrzeigersinn, Pin 1 ist links unten, wenn die Kerbe ebenfalls links
ist. An Pin 18 also liegt der Takteingang. Gl&uuml;cklich sind jene,
deren Floppycontroller bereits in einem IC-Sockel steckt. Das ist
nicht bei allen Atari Computern der Fall!. Hier gilt es den Chip
vorsichtig aus der Fassung zu ziehen, Pin 18 etwas hochzubiegen und
den Controller wieder in seinen Sockel zu stecken. Pin 18 sollte
danach nicht im Sockel stecken. Ohne entspreched gesockelten
Controller m&uuml;ssen sie Pin 18 mit einem feinen Seitenschneider
ungef&auml;hr in der Mitte durchtrennen.
<br>
</p>
<p>Die <a href="0205.htm" target="UDOcon">Information</a> &uuml;ber die Art der eingelegten Diskette stellt
ein HD-Laufwerk normalerweise an Pin 2 des Shugart-Busses, so nennt
sich der Anschlu&szlig; zwischen Diskettenlaufwerk und Rechner, zur
Verf&uuml;gung. Es handelt sich dabei um die zweite Ader des 34
poligen Flachbandkabels, direkt neben der rot oder schwarz markierten
die aller Regel nach Pin 1 markiert. Bei neueren Laufwerken ist die
HD-Erkennung oft nicht mehr bis auf den Shugart-Bus gef&uuml;hrt, da
bei PC's das Diskettenformat bereits vom Rechner &uuml;berpr&uuml;ft
wird.
<br>
</p>
<p>Hier kann man sich nur mittels Ohmmeter ein passendes
Pl&auml;tzchen f&uuml;r eine Br&uuml;cke suchen und die fehlende
Verbindung selbst herstellen. Wer diesen Aufwand scheut, steht dennoch
nicht im Regen. Die Betriebsart l&auml;&szlig;t sich, wenn man auf die
automatische Formaterkennung verzichten kann, auch &uuml;ber einen
Schalter einstellen. Dabei reduziert sich der Aufwand f&uuml;r die
Schaltung noch einmal um 50 %. Damit das HD-Modul richtig
funktioniert, mu&szlig; es zun&auml;chst einmal gebaut werden. Da hier
zwei Varianten vorgestellt werden, fangen wir mit der ersten an. Diese
bedient sich der manuellen Umschaltung.
<br>
</p>
<p>
<br>
<br><b> Ben&ouml;tigte Bauelemente: </b>
<br>
</p>
<p>1 74ALS257 (2 zu 1 Multiplexer)
<br>1 Widerstand 4k7
<br>1 Kondensator 100nF
<br>1 einen einpoligen Ein- Ausschalter
<br>
</p>
<p>F&uuml;r eine Automatische Umschaltung: (Bild 2)
<br>
</p>
<p>Ben&ouml;tigte Bauelemente:
<br>
</p>
<p>1 74ALS257 (2 zu 1 Multiplexer)
<br>1 74LSOO (NAND-Gatter)
<br>2 Kondensator 100nF
<br>1 St&uuml;ck Lochrasterplatine
<br>
</p>
<p>
<br>
<br><b> Verdrahtung </b>
<br>
</p>
<p>Pin 1 des 74ALS257 &uuml;ber einen Widerstand von 4k7 mit Pin 16
(+5V) verbinden. Einen Anschlu&szlig; des Schalters an Masse
l&ouml;ten, den anderen an Pin 1 des IC's. An Pin 2 wird der 8MHz-Takt
eingespeist. Den findet man an dem auf der Atari-Platine verbliebenen
Rest des durchgekniffenen Controlleranschlusses, bzw. dem freien Platz
im Sockel, oder an Pin 15 der <a href="080108.htm" target="UDOcon">CPU</a>. Der 16Mhz Takt geh&ouml;rt an Pin 3
des 74ALS257. Lieferant ist Pin 39 des Shifters. Pin 4 vom 74ALS257 an
den verwaisten Anschlu&szlig; 18 des Floppycontrollers l&ouml;ten.
Jetzt noch Pin 8 und 15 mit Masse und Pin 16 mit +5 Volt verbinden,
einen 100nF Kondensator dazwischen, und einem DD/HD-Betrieb steht
prinzipiell nichts mehr im Wege.
<br>
</p>
<p>
<br>
<br>
</p>
<p><b> Automatisch Umschalten </b>
<br>
</p>
<p>Die Pin 1 + 2 des 74LS00 miteinander und mit Pin 2 des
Shugart-Busses verbinden. Pin 3 + 4 ebenfalls miteinander verbinden.
Pin 5 an Pin 10 des ShugartBusses anl&ouml;ten (<a href="0b0104.htm" target="UDOcon">Drive Select</a> 0). Pin 6
des 74LSOO geh&ouml;rt an Pin 1 des 74ALS257. Pin 7 ist Masse, Pin 14
erwartet +5 Volt, dazwischen geh&ouml;rt ein 100nF Kondensator. Den
Rest genauso wie bei der manuellen Umschaltung verdrahten, dabei
nat&uuml;rlich den Widerstand und den Schalter weglassen.
<br>
</p>
<p>
<br>
<br>
</p>
<p><b> M&ouml;gliche Probleme </b>
</p>
<p>Durch die Taktverdopplung wird die Zeit, die der Floppycontroller
einem angeschlossenen HD-Laufwerk zum Spurwechsel l&auml;&szlig;t,
auch leider halbiert. Schreib/Lesefehler k&ouml;nnen daher die Folge
sein. Abhilfe schafft hier das heraufsetzen der Steprate auf 6ms. Dazu
gibt es diverse Freeware-Utilities.
<br>
</p>
<p>Bei der Benutzung von DD-<a href="0b04.htm" target="UDOcon">Disketten</a> st&ouml;rt das aber nicht und
erm&ouml;glicht einen sicheren HD-Betrieb. Die M&ouml;glichkeit die
Steprate zu manipulieren wird auch von nahezu jedem Kopierprogramm
geboten, au&szlig;erdem existieren zahlreiche f&uuml;r diesen Zweck
geschriebene Autoordnerprogramme, wie oben schon geschrieben.
<br>
</p>
<p>In wirklich &auml;usserst seltenen F&auml;llen kann es sein das
die vor der Floppybuchse liegenden Filterspulen ein Problem
darstellen. Treten trotz geeignetem Floppycontroller Fehler auf,
entfernen Sie die Spulen, die in Reihe zu Pin 19 (RD) und Pin 22 (WD)
des Floppycontrollers liegen. Tauschen Sie die Spulen gegen einfache
kurze Drahtbr&uuml;cken aus.
<br>
</p>
<p>
<br>
<br>
</p>
<p align=center><img src="image/mod1.gif" border=0 width="299" height="165"></p><br>
<div align=center><tt> Abbildung 1 - Schaltung 1, automatische Umschaltung </tt>
<br>
</div>
<p>
<br>
<br>
</p>
<p>
<br>
<br>
</p>
<p align=center><img src="image/mod2.gif" border=0 width="255" height="172"></p><br>
<div align=center><tt> Abbildung 2 - Schaltung 2, Handbetrieb </tt>
<br>
</div>
<p>
<br>
<br>
</p>
<p>
<br>
<br>
</p>
<p align=center><img src="image/sline.gif" border=0 width="640" height="2"></p><br>
<p align=center><img src="image/img.gif" border=0 width="50" height="40"></p><br>

<hr>
<address>Copyright &copy; <a href="http://www.doitarchive.de/">Robert Schaffner</a> (<a href="mailto:doit@doitarchive.de">doit@doitarchive.de</a>)<br>
Letzte Aktualisierung am 23. Mai 2004</address>
</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" border=0 width="24" height="24"></a>
<a href="0b03.htm" target="UDOcon"><img src="udo_up.gif" alt="HD Disk ST" border=0 width="24" height="24"></a>
<a href="0b0304.htm" target="UDOcon"><img src="udo_lf.gif" alt="FAB HD Modul" border=0 width="24" height="24"></a>
<a href="0b0306.htm" target="UDOcon"><img src="udo_rg.gif" alt="ED Modul" border=0 width="24" height="24"></a>
</td></tr></table>
</body></html>

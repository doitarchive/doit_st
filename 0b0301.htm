<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!-- last modified on 23.05.2004 -->
<html>
<head>
<title>
DOIT_ST - Tips u. Tricks zur Atari Serie: HD Disk STe
</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Generator" content="UDO6 PL14 for TOS">
<meta name="Email" content="doit@doitarchive.de">
<link rev=made href="mailto:doit@doitarchive.de" title="E-Mail">
<link rel=home href="doitst1h.htm" title="Homepage">
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" alink="#FF0000" vlink="#800080">

<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" border=0 width="24" height="24"></a>
<a href="0b03.htm" target="UDOcon"><img src="udo_up.gif" alt="HD Disk ST" border=0 width="24" height="24"></a>
<a href="0b03.htm" target="UDOcon"><img src="udo_lf.gif" alt="HD Disk ST" border=0 width="24" height="24"></a>
<a href="0b0302.htm" target="UDOcon"><img src="udo_rg.gif" alt="HD Floppy / MegaST" border=0 width="24" height="24"></a>
</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr>
<td valign=top width="8">&nbsp;</td><td valign=top width="100%">
<h1><a name="HD_20Disk_20STe">11.3.1 HD Disk STe</a></h1>
<p align=center><img src="image/sline.gif" border=0 width="640" height="2"></p><br>
<p><tt> Installing a high-density replacement drive in an ST/STe </tt>
<br>
</p>
<p><img src="image/english.gif" border=0 width="35" height="22"></p><br>
<p>If your internal disk drive has broken down for some reason and
you've been looking for a replacement DD (720Kb) drive you've probably
realized that these are near impossible to get hold of today. But fear
not! By following the steps here you'll be able to use a standard PC
type HD (high density -1.44Mb) disk drive which is widely available
and won't cost you an arm and a leg.
<br>
</p>
<p>I started working on this project in order to upgrade my STe with
a HD drive so I could read/write HD disks in addition to DD disks as
they take up the same physical disk space in my disk storage-box but
store twice the amount of data and cost about the same as DD disks
(which are running scarce these days). I haven't yet completed that
project as it's a little more complicated, but will get back to it
later on with all the details.
<br>
</p>
<p>
<br>
<br><b> THE JOB ITSELF: </b>
<br>
</p>
<p>I've chosen to use the Sony MPF 520-1 disk drive since it's
physically easier to adapt for use with the ST than with other drives.
Besides, Sony is a reputable company and it should be widely
available.
<br>
</p>
<p>The physical adaption mentioned regards the &quot;eject
button&quot; (the plastic &quot;button&quot; you press in order to
eject the disk). You might have noticed that the Atari styled button
is shaped a bit different from the usual PC styled eject buttons. Many
people have resorted to cutting the computer's case in order to use a
new drive with the PC styled button and front-panel, but there's no
need for this!
<br>
</p>
<p>With this drive you simply need to do a little modification to the
drive mechanics, and this won't be visible at all when installed.
It'll look a whole lot better than a &quot;home made&quot; hole in the
casing! You end up using the eject button and front panel from the old
Atari drive, and remove the PC styled eject button/front panel from
the new PC styled drive. The front panels snap easily on/off these
drives so you should have no problem with this. As the eject button
from the old drive doesn't have a &quot;hook&quot; which fits the new
drive you'll have to snap this off and possibly use some glue to fix
it to the eject button metal &quot;lug&quot; (see enclosed .IMG file
for details).
<br>
</p>
<p>In addition to this minor modification some electronic
modifications have to be done. The 34 pin connector which connects the
drive to the ST main circuit board has to be inserted &quot;upside
down&quot; into the drive unit. This is because most HD disk drives
(all I've come by so far and heard of from others) have their
connectors &quot;reversed&quot; compared to the old <a href="0305.htm" target="UDOcon">Atari ST</a> drive.
So, to be able to do this you have to cut away a little plastic notch
on the connector at the end of that 34 way ribbon-cable.
<br>
</p>
<p>
<br>
<br>
</p>
<p align=center><img src="image/sony_144.gif" border=0 width="640" height="400"></p><br>
<div align=center><tt> Abbildung 1 - SONY 1.44 MB HD Disk Drive </tt>
</div>
<p>
<br>
<br>
</p>
<p>Now comes the soldering iron... you need to connect a wire between
the two connections of the &quot;disk detect&quot; switch. That is,
the switch will always be switched &quot;on&quot; after you've done
this. The ST detects if a disk-change has been made in another way
than the PC, and if this modification isn't done you can end up
messing up your disks real bad (I know I did, so don't make the same
mistake I did when I erased some files because the computer didn't
&quot;see&quot; me putting in a different disk when I was saving my
files!).
</p>
<p>The last thing you need to do is to set the drive select to
&quot;drive 0&quot;. It's probably set to &quot;drive 1&quot; when you
get the drive- this is because PCs see &quot;drive 1&quot; as the boot
drive, while the ST sees the boot drive as &quot;drive 0&quot;.
Normally this is just a jumper on the drive's circuit board, close by
the power-connector. If not, it might be soldered on the circuit
board, where you need to de-solder it and relocate the jumper to
&quot;drive 0&quot;.
<br>
<br>
<br>
</p>
<p align=center><img src="image/man_mode.gif" border=0 width="640" height="400"></p><br>
<div align=center><tt> Abbildung 2 - SONY 1.44 MB HD Disk Drive modification </tt>
</div>
<p>
<br>
<br>
</p>
<p>
<br>
<br>
</p>
<p align=center><img src="image/wd_1772.gif" border=0 width="640" height="400"></p><br>
<div align=center><tt> Abbildung 3 - Atari Floppy Disk Controller </tt>
</div>
<p>
<br>
<br>
</p>
<p>
<br>
<br><b> SUMMARY: </b>
<br>
</p>
<p>-cut away a small part of metal on the drive's mechanics to
accomodate for the ST styled eject-button and front-panel.
<br>
<br>-locate the 34-pin connector at the end of the flat ribbon-cable.
You will see a notch in the middle of it on one side. This prevents it
from going into the drive the wrong way, but since this is exactly
what we need to do you need to cut away this notch and insert it the
&quot;wrong way round&quot;.
<br>
<br>-connect a wire between the two pins of the disk detect switch
(usually marked &quot;CTIN&quot;. It should be the second micro-switch
from the left if you turn the drive over and look at the front-end of
the drive's circuit board.
<br>
<br>-The drive-select jumper should be set for &quot;drive 0&quot;.
<br>
<br>That's all there is to it! The new drive will act exactly as the
old DD (720Kb) disk drive. I've made a .IMG file which shows all the
details (&quot;a picture says more than a thousand words&quot;), so it
should be quite clear what to do. Oh, one thing to be aware of is the
power connector to the disk drive. Most connectors are wired
&quot;standard&quot; and should connect to the new drive without any
problems, but certain older Atari drives were connected differently
(but using the same connector!!!), so be sure that you don't fry your
new drive by doing this wrong! The correct pinouts of this connector
is shown in the IMG file as well.
<br>
<br>
</p>
<p>I've performed this project twice with an STe and two different
revisions of the Sony MPF 520-1 disk drive. Both without any problems.
It should work equally well with any ST/F/M computer since the disk
drive acts the same way there.
<br>
</p>
<p>Good luck!
<br>
</p>
<p>Hallvard Tangeraas (hallvart@sn.no) 19-May-1997
<br>
</p>
<p>
<br>
<br>
</p>
<p><b> HD Floppy Drive won't work? </b>
<br>
</p>
<p>Text comes from HD Floppy Atari Upgrade Kit
<br>
</p>
<p>With a MEGA STe you should check if a connection is present from
U7 (<a href="080108.htm" target="UDOcon">CPU</a>) Pin 32 to UA02 (PAL20L8) Pin 19. If not, solder a short wire
between both solder points on mainboard.
<br>
</p>
<p>In addition, IC UA02 should labeled as C301901-002. If you have an
IC with the label C301901-001, it had to be removed.
<br>
</p>
<p>The original HD Floppy Upgrade Kit include TOS 2.06, <a href="040a.htm" target="UDOcon">AJAX</a> Chip
C301901-002 and an EPSON SMD340 HD Floppy Drive.
<br>
</p>
<p>If the 1.44MB floppy does not format reliably, it could be an
problem with the PSU. The part number of the internal PSU should ended
as -002. If the seriel ended as -001 PSU, the central PCB screw had to
be removed!. It makes an short circuit on main pcb.
<br>
</p>
<p>Continuing where I left off with installing a HD disk drive inside
my trusty old STe, and at the same time documenting and updating my
publically available file on how to do this I've run into a slight
problem...
<br>
</p>
<p>I needed a new cable for the disk drive as I'm going to recase it
(putting it inside a 19&quot; rack enclosure) and went to a computer
store and bought a standard ready-made 34 pin cable with connectors at
both ends. Rather than mess around with the existing IDC connector on
the STe main board I unsoldered it and mounted a new connector which
could be unplugged (the same connector which sits on the disk drive
itself).
<br>
</p>
<p>No problem getting things to work -I just used a multimeter to
check which side went to ground, comparing it with the cable and the
disk drive (one side of the 34 pin connector has almost all the pins
going to ground and are connected together).
<br>
</p>
<p>But... the problem/confusion lies around the drive 0/drive 1
select. The drive I'm using has a zero Ohm SMD resistor (i.e.
&quot;solderable jumper&quot;) on the circuit board which I've
unsoldered and re-soldered back into the &quot;Drive 0 select&quot;
position (unlike the &quot;drive 1 select&quot; position which PCs use
for &quot;A&quot;), but I thinking about those who might be unlucky
having bought a drive without this option...
<br>
</p>
<p>I was told some time ago when I discussed this subject here by
someone that it should be possible to twist certain pins of the
connector to allow for &quot;drive 0&quot; select on a drive which is
set to &quot;drive 1 select&quot;. Now, the cable I just bought has 3
connectors. The one in the middle goes to the computer, one end goes
to drive &quot;A&quot;, and the other end apparently goes to drive
&quot;B&quot; on a PC as it has a part of the cable twisted. So I went
aheard with my experiment, first soldering back the jumper to
&quot;drive 1&quot;, then booting the computer with the twisted cable
connected to the drive. the result?
<br>4 bombs!!!!
<br>
</p>
<p>How come? Isn't even this connection standard?
<br>The pins reversed are pins 10-16.
<br>According to this website:
<br>http://theref.aquascape.com/theref/tech_talk/tech_talk02.html
<br>
</p>
<p>the pinout is as follows (left), and becomes (right):
<br>
<br>10 Motor enable A -&gt; Motor enable B (pin 16)
<br>11 GND -&gt; GND (pin 15)
<br>12 Drive select B -&gt; Drive select A (pin 14)
<br>13 GND -&gt; GND (pin 13)
<br>14 Drive select A -&gt; Drive select B (pin 12)
<br>15 GND -&gt; GND (pin 11)
<br>16 Motor enable B -&gt; Motor enable A (pin 10
<br>
<br>This sounds about right to me, but apparently it's not as there
must be a reason for those four bombs when booting. When reconnecting
the drive, using the non-twisted connector (still with the drive set
to &quot;1&quot; as in &quot;PC drive A&quot;) it took forever to have
the dektop appear and I couldn't read the disk (neither &quot;A&quot;
nor &quot;B&quot;), but at least this didn't give me any bombs. So
before I continue experimenting, probably messing up the cable so bad
I'll have to buy yet another one ;-) ... does anyone know what the
deal is here?
<br>
</p>
<p>Here's the full pinout of the Shugart connector:
<br>
<br>2 High/low density 1 GND
<br>4 3 GND
<br>6 5 GND
<br>8 Index 7 GND
<br>10 Motor enable A 9 GND
<br>12 Drive select B 11 GND
<br>14 Drive select A 13 GND
<br>16 Motor enable A 15 GND
<br>18 Direction select 17 GND
<br>20 Head step 19 GND
<br>22 Write data 21 GND
<br>24 Write gate 23 GND
<br>26 Track 00 25 GND
<br>28 Write protect 27 GND
<br>30 Read data 29 GND
<br>32 Head select 31 GND
<br>34 Disk change 33 GND
<br>
</p>
<p>
<br>
</p>
<p>
<br>
<br>
</p>
<p align=center><img src="image/sline.gif" border=0 width="640" height="2"></p><br>
<p align=center><img src="image/img.gif" border=0 width="50" height="40"></p><br>

<hr>
<address>Copyright &copy; <a href="http://www.doitarchive.de/">Robert Schaffner</a> (<a href="mailto:doit@doitarchive.de">doit@doitarchive.de</a>)<br>
Letzte Aktualisierung am 23. Mai 2004</address>
</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" border=0 width="24" height="24"></a>
<a href="0b03.htm" target="UDOcon"><img src="udo_up.gif" alt="HD Disk ST" border=0 width="24" height="24"></a>
<a href="0b03.htm" target="UDOcon"><img src="udo_lf.gif" alt="HD Disk ST" border=0 width="24" height="24"></a>
<a href="0b0302.htm" target="UDOcon"><img src="udo_rg.gif" alt="HD Floppy / MegaST" border=0 width="24" height="24"></a>
</td></tr></table>
</body></html>

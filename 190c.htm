<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!-- last modified on 23.05.2004 -->
<html>
<head>
<title>
DOIT_ST - Tips u. Tricks zur Atari Serie: Y2K
</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Generator" content="UDO6 PL14 for TOS">
<meta name="Email" content="doit@doitarchive.de">
<link rev=made href="mailto:doit@doitarchive.de" title="E-Mail">
<link rel=home href="doitst1h.htm" title="Homepage">
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" alink="#FF0000" vlink="#800080">

<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" border=0 width="24" height="24"></a>
<a href="19.htm" target="UDOcon"><img src="udo_up.gif" alt="Anhang" border=0 width="24" height="24"></a>
<a href="190b.htm" target="UDOcon"><img src="udo_lf.gif" alt="Cheatmodes" border=0 width="24" height="24"></a>
<a href="190d.htm" target="UDOcon"><img src="udo_rg.gif" alt="Schaltplan" border=0 width="24" height="24"></a>
</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr>
<td valign=top width="8">&nbsp;</td><td valign=top width="100%">
<h1><a name="Y2K">25.12 Y2K</a></h1>
<p align=center><img src="image/sline.gif" border=0 width="640" height="2"></p><br>
<p><tt> Y2K-Probleme mit Atari </tt>
<br>
<br>
</p>
<p><img src="image/deutsch.gif" border=0 width="35" height="22"></p><br>
<p><img src="image/english.gif" border=0 width="35" height="22"></p><br>
<p>Passiert ist eigentlich, trotz reichlich Panikmache der Medien,
sehr wenig. Besonders trifft das auf Atari-Computer Systeme zu.
Einzelne Datumsprobleme &auml;lterer Software beschreibe ich nicht als
Y2K-Problem, sondern als Vers&auml;umniss der Programmierer. Was
kommen w&uuml;rde war schliesslich lange genug bekannt. Probleme
einige Programme k&ouml;nnen nicht mehr behoben werden da die Autoren
ihre Arbeit an diesen Programmen bereits vor Jahren eingestellt haben.
<br>
</p>
<dl>
<dt><b>Betroffene Software</b></dt><dd>
<br>&nbsp;
<br>UPoint, ein <a href="1703.htm" target="UDOcon">UUCP</a> Mailer, stellt seit dem 01.01.2000 die
Headerzeilen in den Newsgroups nicht mehr dar.
<br>
<br>&nbsp;
<br>THE_DOT hat ein generelles Problem mit der Datumsanteige im
Fenster &quot;Multipoll&quot;
<br>
<br>&nbsp;
<br>ATSTART hat Probleme mit dem Datum. <a href="0201.htm" target="UDOcon">Autor</a> Andreas Schrell@RS.
<br>&nbsp;
<br>TELE-OFFICE hat ein Problem mit dem Datum.
<br>
<br>&nbsp;
<br>XBOOT3 hat Probleme mit der Jahreszahl.
<br>Die Uhrzeit l&auml;sst sich nicht einstellen.
<br>
<br>&nbsp;
<br>SCRIPT5 vergibt bei &quot;Datum einsetzen&quot; eine Jahreszahl
von 19100.
<br>
<br>&nbsp;
<br>MENUEINFO hat ebenfalls Probleme mit dem Datum. Hier reicht es
aber wenn die entsprechende .INF-Datei gel&ouml;scht wird.
<br>
<br>&nbsp;
<dt><b>Hardware</b></dt><dd>
<br>&nbsp;
<br>Betroffen sind einige nachtr&auml;glich eingebaute Hardwarehuhren
der Firma ICD. Hier stellte sich das Datum auf 1990 zur&uuml;ck. Bei
einigen Uhren l&auml;sst sich das durch l&ouml;schen der .INF Dateien
wieder beheben. Bei Uhren ohne Treibersoftware nicht.
<br>
<br>&nbsp;
<br>Betroffen sind auch einige DMA-&gt;SCSI <a href="0d02.htm" target="UDOcon">Hostadapter</a> der gleichen
Firma mit integrierter <a href="1413.htm" target="UDOcon">Uhr</a>.
<br>
<br>&nbsp;
<dt><b>XBIOS L&ouml;sung</b></dt><dd>
<br>&nbsp;
<br>Programmname: Y2K_FIX
<br>Version: 0.9
<br><a href="0201.htm" target="UDOcon">Autor</a>: Ingo Linkweiler
<br>Email: i.linkweiler@gmx.de
<br>Email: ingo linkweiler@do
<br>Web : www.icc-computer.de/starcall
<br>
<br>&nbsp;
<br>Year2000-Fix. Umgeht Jahr-2000 Fehler vieler TOS-Versionen im
Xbios, sowie Probleme mit SCSI-Hardware-Uhren.
<br>
<br>&nbsp;
<br>Hardware: ST mit nicht funktionierender XBIOS-<a href="1413.htm" target="UDOcon">Uhr</a>
<br>
<br>&nbsp;
<br>Features:
<br>
<br>&nbsp;
<br>Meine <a href="1413.htm" target="UDOcon">Uhr</a> im ST mag nicht mehr! Dieses Programm kann helfen.
Einfach im Autoordner installieren, und alles geht wieder. Incl.
Source. Problem war: XBIOS-<a href="1413.htm" target="UDOcon">Uhr</a> geht nur bis 1999.
<br>
<br>&nbsp;
<br>L&ouml;sung:
<br>Y2K-Fix stellt beim Setzen der Zeit die XBIOS-<a href="1413.htm" target="UDOcon">Uhr</a> 20 Jahre
zur&uuml;ck. Beim Lesen werden wieder 20 Jahre dazugez&auml;hlt.
Zus&auml;tzlich wird die Synchronisierung der Gemdos-<a href="1413.htm" target="UDOcon">Uhr</a>
durchgef&uuml;hrt.
<br>
<br>&nbsp;
<br><a href="0204.htm" target="UDOcon">Installation</a>:
<br>Einfach Y2K_FIX.PRG starten oder in den Auto-Ordner kopieren.
Bitte NICHT installieren, wenn keine Probleme auftreten.
<br>&nbsp;
</dl>
<p>
<br>
<br><b> Definition des Problems </b>
<br>
</p>
<p>Here is a defintion of the problem. Hope it is of interest.
<br>
<br>
</p>
<p><a href="0305.htm" target="UDOcon">Atari ST</a> Time-of-Day Clock Problems
<br>
</p>
<dl>
<dt><b>Definition of the Problems</b></dt><dd> 1. There are two Time-of-day Clocks in the Atari which are not
maintained in sync by the hardware or operating system.
<br>2. One of the Time-of-day Clocks fails to operate for dates after
31 Dec 1999.
<br>
<br>&nbsp;
<dt><b>Scope of the Problems</b></dt><dd> The problems exists on <a href="0305.htm" target="UDOcon">Atari ST</a> machines with TOS levels from 1.0
to 1.62.
<br>
<br>&nbsp;
<dt><b>Background to Atatri ST Time-of-Day Clock Problems</b></dt><dd> When the <a href="0305.htm" target="UDOcon">Atari ST</a> was released in the mid 1980's there were at
least three design errors associated with the Time-of-Day Clock. These
were:
<br>
<br>&nbsp;
<br>1. Two Time-of-Day Clocks
<br>
<br>&nbsp;
<br>Two related but different Time-of-Day(TOD) Clocks mechanisms were
included. This does not make any sense given the associated functions
that were provided in the DOS and XBIOS sections of TOS. The TOS
Version 1 code associated with XBIOS can be examined at the addresses
shown in the TOS Addresses table below.
<br>
<br>&nbsp;
<br>The two TOD Clocks can be independently set to any date/time, and
in consequence, Get Date/Time frequently gives unexpected results if
the clocks are not in sync.
<br>
<br>&nbsp;
<br>Since the choice of TOD Clock Function rests with the application
programmer, there is likely to be many date incompatible programs.
There are various Clock-Sync programs that may help to get the clocks
in sync up until 31Dec1999. After that a software fix is needed for
the XBIOS Clock functions.
<br>
<br>&nbsp;
<dt><b>XBIOS SetTime/Date Function</b></dt><dd>
<br>&nbsp;
<br>The XBIOS SetTime/Date function, which accesses the IKBD hardware
via the IKBD serial Binary Coded Decimal (BCD) interface, for some
strange reason, has #$80 added to the BCD Year value before
transmitting it to the IKBD.
<br>&nbsp;
<br>Programmers have already gone to the trouble of subtracting 1980
from any date inputted by the user so that the year 1980 from the user
will be passed to XBIOS (or DOS) as 0.
<br>
<br>&nbsp;
<br>The consequence of this is that year values greater than BCD 19
will be invalid after adding #$80. e.g. BCD_19 + #$80 = BCD_99 which
is valid but BCD_20 + #$80 = BCD_A0 which is invalid. The IKBD ignores
invalid BCD values so the year is not updated in the IKBD although the
time is updated.
<br>
<br>&nbsp;
<dt><b>XBIOS GetTime/Date Function</b></dt><dd>
<br>&nbsp;
<br>The XBIOS GetTime/Date function, which also accesses the IKBD
hardware via the IKBD serial Binary Coded Decimal (BCD) interface,
compensates for 2. above by subtracting decimal 80 from the Year AFTER
it has been converted from BCD.
<br>
<br>&nbsp;
<br>This means that the Get Year is not the same as the Set Year for
input dates above 2060. The Set years 2060 to 2107 map to Get years
2028 to 2075.
<br>
<br>&nbsp;
<br>This may sound a bit academic, but it does affect some of the
possible software fix methods.
<br>
<br>&nbsp;
<br>This also accounts for frequently getting the year 2028. When the
date in the IKBD rolls over to an invalid number and the IKBD passes
back BCD_00. Since BCD_00 from the IKBD Clock becomes BCD_00 - decimal
80 = #$B0, then the top 7-bits are then right-shifted to give #$30 (48
decimal) which is passed back to the application. Add 1980 in the
application and you get 2028. Magic, but a pain.
<br>
<br>&nbsp;
</dl>
<p>Clive Williams Latest update: 02Jan2000
<br>
</p>
<p>
<br>
<br>
</p>
<p align=center><img src="image/sline.gif" border=0 width="640" height="2"></p><br>
<p align=center><img src="image/img.gif" border=0 width="50" height="40"></p><br>

<hr>
<address>Copyright &copy; <a href="http://www.doitarchive.de/">Robert Schaffner</a> (<a href="mailto:doit@doitarchive.de">doit@doitarchive.de</a>)<br>
Letzte Aktualisierung am 23. Mai 2004</address>
</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" border=0 width="24" height="24"></a>
<a href="19.htm" target="UDOcon"><img src="udo_up.gif" alt="Anhang" border=0 width="24" height="24"></a>
<a href="190b.htm" target="UDOcon"><img src="udo_lf.gif" alt="Cheatmodes" border=0 width="24" height="24"></a>
<a href="190d.htm" target="UDOcon"><img src="udo_rg.gif" alt="Schaltplan" border=0 width="24" height="24"></a>
</td></tr></table>
</body></html>

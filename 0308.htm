<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!-- last modified on 23.05.2004 -->
<html>
<head>
<title>
DOIT_ST - Tips u. Tricks zur Atari Serie: Spezifikation Atari ST
</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Generator" content="UDO6 PL14 for TOS">
<meta name="Email" content="doit@doitarchive.de">
<link rev=made href="mailto:doit@doitarchive.de" title="E-Mail">
<link rel=home href="doitst1h.htm" title="Homepage">
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" alink="#FF0000" vlink="#800080">

<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" border=0 width="24" height="24"></a>
<a href="03.htm" target="UDOcon"><img src="udo_up.gif" alt="Atari ST Series Hardware" border=0 width="24" height="24"></a>
<a href="030704.htm" target="UDOcon"><img src="udo_lf.gif" alt="STBook Stromversorgung" border=0 width="24" height="24"></a>
<a href="0309.htm" target="UDOcon"><img src="udo_rg.gif" alt="Spezifikation Atari STe" border=0 width="24" height="24"></a>
</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr>
<td valign=top width="8">&nbsp;</td><td valign=top width="100%">
<h1><a name="Spezifikation_20Atari_20ST">3.8 Spezifikation Atari ST</a></h1>
<p align=center><img src="image/sline.gif" border=0 width="640" height="2"></p><br>
<p><tt> Die Spezifikation der <a href="0305.htm" target="UDOcon">Atari ST</a> Serie </tt>
<br>
<br>
</p>
<p><img src="image/english.gif" border=0 width="35" height="22"></p><br>
<div align=center><tt> Engineering Hardware Specification
<br>
</div>
<div align=center>of the
<br>
</div>
<div align=center><a href="0305.htm" target="UDOcon">Atari ST</a> Computer System
<br></tt>
<br>
<br>
</div>
<div align=center>The Atari Corporation
<br>
</div>
<div align=center>Sunnyvale, California
<br>
</div>
<div align=center>7 January 1986
<br>
</div>
<p>
<br>
<br>
</p>
<p>1.) 7 January 1986
<br>
</p>
<p>THE SCOPE OF THIS DOCUMENT is limited to a description of the ST
computer system hardware characteristics and idiosyncrasies. This
document does not provide a detailed description of ST component
parts, peripheral devices, dev- ice protocols, or software. References
are provided for detailed inquiry.
<br>
</p>
<p><tt> 1. System Architecture </tt>
<br>
</p>
<pre>                   ----------                    ----------
                  |Graphics  |                  |Music     |
                  |Subsystem |                  |Subsystem |
                   ----------                    ----------
                        |                            |
                        |         ----------         |
                         --------| Main     |--------
                                 | System   |
                                  ----------
                                       |
                                       |         ----------
                  The ST                --------|Device    |
                                                |Subsystems|
                                                 ----------

</pre>
<p>
<br>
</p>
<p>The hardware architecture of the Atari Corporation ST
(Sixteen/Thirty-two) computer system consists of a main sys- tem, a
graphics subsystem, a music subsystem, and several device subsystems
(most of the device subsystems require ST resident intelligence). The
ST is based on the MC68000 16 bit data/24 bit address microprocessor
unit capable of directly accessing up to 16 Mbytes of ROM and RAM
memory. Hardware features of the ST computer system include:
<br>
</p>
<dl>
<dt><b>Main System</b></dt><dd> o 16 bit data/24 bit address 8 MHz microprocessor unit o 192
Kbyte ROM, cartridge expandable to 320 Kbyte o 512 Kbyte RAM or 1
Mbyte RAM o direct memory access support
<br>&nbsp;
<dt><b>Graphics Subsystem</b></dt><dd> o 32 Kbyte BitMap video display memory (from above) o 320 x 200
pixel, 16 color palette from 512 selections o 640 x 200 pixel, 4 color
palette from 512 selections o 640 x 400 pixel, monochrome
<br>&nbsp;
<dt><b>Music Subsystem</b></dt><dd> o programmable sound synthesizer o musical instrument network
communication
<br>&nbsp;
</dl>
<p>
<br>
<br>
</p>
<div align=center><tt> Atari Corp Confidential </tt>
<br>
</div>
<p>
<br>
<br>
</p>
<p>.2) 7 January 1986
<br>
</p>
<dl>
<dt><b>Device Subsystems</b></dt><dd> o intelligent keyboard o two button mouse o RGB color and
monochrome monitor interfaces o printer parallel interface o RS232
serial interface o MIDI musical instrument interface o on board floppy
disk controller and DMA interface o hard disk drive DMA interface
<br>&nbsp;
</dl>
<p>The following is a simplified hardware system block diagram of the
<a href="0305.htm" target="UDOcon">Atari ST</a>:
<br>
</p>
<p>.3) 7 January 1986
<br>
</p>
<p>-- <a href="0305.htm" target="UDOcon">Atari ST</a> System Block Diagram ---
<br>
<br>
</p>
<pre>
           ---------------
          | MC68000 MPU   |&lt;--
          |               |   |
           ---------------    |
                              |                           ----------
                              |&lt;------------------------&gt;|192 Kbyte |&lt;---&gt;EXPAN
                     ---------|-------------------------&gt;| ROM      |
                    |         |                           ----------
                    |         |                           ----------
                    |         |                          |512K or 1M|
                    |         |                       --&gt;| byte RAM |&lt;--
            ----------        |        ----------    |    ----------    |
           | Control  |&lt;-----&gt;|&lt;-----&gt;| Memory   |&lt;--                   |
           | Logic    |-------|------&gt;|Controller|&lt;--                   |
            ----------        |        ----------    |    ----------    |
             |||||            |        ----------     --&gt;| <a href="12.htm" target="UDOcon">Video</a>    |&lt;--  RF MOD
             |||||            |&lt;-----&gt;| Buffers  |&lt;-----&gt;| <a href="080106.htm" target="UDOcon">Shifter</a>  |----&gt;RGB
             |||||            |       |          |        ----------      MONO
             |||||            |        ----------
             |||||            |        ----------         ----------
             |||||            |&lt;-----&gt;| MC6850   |&lt;-----&gt;| <a href="0f01.htm" target="UDOcon">Keyboard</a> |&lt;---&gt;IKBD
             |||| ------------|------&gt;| <a href="08010a.htm" target="UDOcon">ACIA</a>     |       | Port     |
             ||||             |        ----------         ----------
             ||||             |        ----------         ----------
             ||||             |&lt;-----&gt;| MC6850   |&lt;-----&gt;| MIDI     |----&gt;OUT/THRU
             ||| -------------|------&gt;| <a href="08010a.htm" target="UDOcon">ACIA</a>     |       | Ports    |&lt;----IN
             |||              |        ----------         ----------
             |||              |        ----------         ----------
             |||              |&lt;-----&gt;| MK68901  |&lt;-----&gt;| RS232    |&lt;---&gt;MODEM
             || --------------|------&gt;| MFP      |&lt;--    | Port     |
             ||               |        ----------    |    ----------
             ||               |                      |    ----------
             ||               |                       ---| Parallel |&lt;---&gt;PRINTER
             ||               |                       --&gt;| Port     |
             ||               |        ----------    |    ----------
             ||               |&lt;-----&gt;| YM-2149  |&lt;--     ----------
             | ---------------|------&gt;| PSG      |------&gt;| Sound    |----&gt;AUDIO
             |                |       |          |---    | Channels |
             |                |        ----------    |    ----------
             |                |                      |    ----------
             |                |        ----------     --&gt;| Floppy   |&lt;---&gt;FLOPPY
             |                |&lt;------| WD1772   |&lt;-----&gt;|Disk Port |     DRIVE
             |                |    --&gt;| FDC      |        ----------
             |                |   |    ----------
             |                |   |    ----------         ----------
             |                |    --&gt;| DMA      |&lt;-----&gt;|Hard Disk |&lt;---&gt;HARD
             |                |&lt;-----&gt;|Controller|       | Port     |     DRIVE
              -----------------------&gt;|          |        ----------
                                       ----------
</pre>
<p>
<br>
<br>
</p>
<p>.4) 7 January 1986
<br>
</p>
<p><tt> 2. Main System </tt>
<br>
<br>
<br>
</p>
<pre>
                   ----------                    ----------
                  |          |                  |          |
                  |          |                  |          |
                   ----------                    ----------
                        |                            |
                        |         ----------         |
                         --------| Main     |--------
                                 | System   |
                                  ----------
                                       |
                                       |         ----------
                                        --------|          |
                                                |          |
                                                 ----------
</pre>
<p>
<br>
<br>
</p>
<p>The main system includes the microprocessor unit, main memory
(both ROM and RAM), and general purpose DMA con- troller. The main
system is limited to memory expansion only and should not be
considered an open system (except via the high speed device
interfaces).
<br>
</p>
<p><tt> 2.1. Microprocessor Unit </tt>
<br>
<br>The ST computer system is based on an 8 MHz MC68000 16 bit data/24
bit address microprocessor unit (with an inter- nal 32 bit
architecture). Some features of the MC68000 are: eight 32 bit data
registers, nine 32 bit address registers, a 16 Mbyte direct addressing
range, 14 addressing modes, memory mapped I/O, five data types, and a
56 instruction set. The MPU is directly supported by an MK68901 Multi
Function Peripheral providing general purpose interrupt con- trol and
timers, among other things.
<br>
</p>
<p><tt> 2.2. Memory Configuration </tt>
<br>
<br>The configuration of main memory consists of five 64 Kbyte sets of
ROM (standard set0 to set2, expansion set3 and set4) and one
configurable bank (standard bank0) of 128 Kbyte, 512 Kbyte, or 2 Mbyte
RAM. The configuration of main memory ROM is ascertained through
software identification. The configuration of main memory RAM is
achieved via the programming of the Memory Configuration Register
(read/write, reset: all zeros). RAM configuration must be asserted
during the first steps of the power up sequence and can be determined
by using the following shadow test algo- rithm:
<br>
</p>
<p>.5) 7 January 1986
<br>
<br>
</p>
<dl>
<dt><b>START</b></dt><dd> o write 0x000a (2 Mbyte, 2 Mbyte) to the Memory Configuration
Register.
<br>
<br>&nbsp;
<dt><b>BANK0</b></dt><dd> o write Pattern to 0x000000 - 0x0001ff.
<br>o read Pattern from 0x000200 - 0x0003ff.
<br>o if Match, then Bank0 contains 128 Kbyte; goto BANK1.
<br>o read Pattern from 0x000400 - 0x0005ff.
<br>o if Match, then Bank0 contains 512 Kbyte; goto BANK1.
<br>o read Pattern from 0x000000 - 0x0001ff.
<br>o if Match, then Bank0 contains 2 Mbyte; goto BANK1.
<br>o panic: RAM error in Bank0.
<br>
<br>&nbsp;
<dt><b>BANK1</b></dt><dd> o write Pattern to 0x200000 - 0x2001ff.
<br>o read Pattern from 0x200200 - 0x2003ff.
<br>o if Match, then Bank1 contains 128 Kbyte; goto FIN.
<br>o read Pattern from 0x200400 - 0x2005ff.
<br>o if Match, then Bank1 contains 512 Kbyte; goto FIN.
<br>o read Pattern from 0x200000 - 0x2001ff.
<br>o if Match, then Bank1 contains 2 Mbyte; goto FIN.
<br>o note: Bank1 nonexistent.
<br>
<br>&nbsp;
<dt><b>FIN</b></dt><dd> o write Configuration to the Memory Configuration Register.
<br>o note Total Memory Size (Top of RAM) for future reference.
<br>
<br>&nbsp;
</dl>
<p>
<br>
</p>
<p>RAM memory access cycles are interleaved between the
microprocessor unit and the video controller, thus allowing video
display memory to reside efficiently as part of main memory (the MPU
still maintains full memory bandwidth).
<br>
</p>
<p><tt> 2.3. Direct Memory Access </tt>
<br>
<br>A direct main memory RAM access channel is shared to provide
support for both low speed (250 to 500 Kbits/sec) and high speed (up
to 12 Mbits/sec) 8 bit device controll- ers. The base address for the
DMA read or write operation is loaded into the DMA Base Address and
Counter Register (read/write, reset: all zeros). Since only one
counter register and channel is provided, only one DMA operation can
be executed at a time.
<br>
</p>
<p>The actual DMA operation is performed through a 32 byte FIFO
programmed via the DMA Mode Control Register (word access write only,
reset: not affected) and DMA Sector Count Register (word access write
only, reset: all zeros). The progress, success, or failure of a DMA
operation is reported through the DMA Status Register (word access
read only, reset: one) which is cleared by toggling Write/_Read in the
DMA Mode Control Register.
<br>
</p>
<p>.6) 7 January 1986
<br>
<br>
</p>
<p>Bus accesses are granted to the DMA controller and MC68000 MPU on
an egalitarian first come, first served basis. The access remains in
effect until an operation is complete or until control is otherwise
relinquished.
<br>
</p>
<p>.7) 7 January 1986
<br>
<br>
</p>
<p><tt> 3. Graphics Subsystem </tt>
<br>
<br>
<br>
</p>
<pre>
                   ----------                    ----------
                  |Graphics  |                  |          |
                  |Subsystem |                  |          |
                   ----------                    ----------
                        |                            |
                        |         ----------         |
                         --------|          |--------
                                 |          |
                                  ----------
                                       |
                                       |         ----------
                                        --------|          |
                                                |          |
                                                 ----------
</pre>
<p>
<br>
</p>
<p>The basic components of the graphics subsystem are video display
memory and the video controller. The defini- tions of BitMap, BitBlk,
BitBlt, coordinate system, and color model are left to higher logical
(software) levels of system specification.
<br>
</p>
<p><tt> 3.1. <a href="12.htm" target="UDOcon">Video</a> Display Memory </tt>
<br>
<br><a href="12.htm" target="UDOcon">Video</a> display memory is configured as n logical planes interwoven
by 16 bit words into contiguous memory to form one 32 Kbyte (actually
0x7d00) physical plane starting at any 256 byte half page boundary (in
RAM only). The starting address of display memory is placed in the
<a href="12.htm" target="UDOcon">Video</a> Base Address Register (read/write, reset: all zeros) which is
then loaded into the <a href="12.htm" target="UDOcon">Video</a> Address Counter Register (read only, reset:
all zeros) and incremented. The following is a diagram of possible
physical configurations of video display memory:
<br>
</p>
<pre>

                         --------
          16 bit word   |        |
                         -------- -------- -------- -------- --------
          4 plane       |plane 0 |plane 1 |plane 2 |plane 3 |plane 0 |
                         -------- -------- -------- -------- --------
          2 plane       |plane 0 |plane 1 |plane 0 |plane 1 |plane 0 |
                         -------- -------- -------- -------- --------
          1 plane       |plane 0 |plane 0 |plane 0 |plane 0 |plane 0 |
                         -------- -------- -------- -------- --------
</pre>
<p>
<br>
</p>
<p>.8) 7 January 1986
<br>
<br>
</p>
<p>Display memory resides as part of main memory and has an identical
bit, byte, and word arrangement with the physi- cal screen origin
located at top left (bit 15):
<br>
</p>
<pre>
                          high     low
                         -------- --------
          word 0        | byte 0 | byte 1 |
                         -------- --------
                         fedcba98 76543210

</pre>
<p>
<br>
</p>
<p><tt> 3.2. <a href="12.htm" target="UDOcon">Video</a> Configuration </tt>
<br>
<br>The ST possesses three modes of video configuration: 320 x 200
resolution with 4 planes, 640 x 200 resolution with 2 planes, and 640
x 400 resolution with 1 plane. The modes are set through the Shift
Mode Register (read/write, reset: all zeros). A sixteen word color
lookup palette is provided with nine bits of color per entry. The
sixteen Color Palette Registers (read/write, reset: not affected)
contain three bits of red, green, and blue aligned on low nibble
boundaries. Eight intensity levels of red, eight intensity levels of
green, and eight intensity levels of blue produce a total of 512
possible colors.
<br>
</p>
<p>In 320 x 200 4 plane mode all sixteen palette colors can be
indexed, while in 640 x 200 2 plane mode only the first four palette
entries are applicable. In 640 x 400 monochrome mode the color palette
is bypassed altogether and is instead provided with an inverter for
inverse video con- trolled by bit 0 of palette color 0 (normal video
is black 0, white 1). Color palette memory is arranged the same as
main memory. Palette color 0 is also used to assign a border color
while in a multi-plane mode. In monochrome mode the border color is
always black.
<br>
</p>
<p>The general flow of the video controller is as follows: BitMap
planes are taken a word at a time from video display memory and placed
in the video shift register where one bit from each plane is shifted
out and collectively used as an index (plane 0 is the least
significant bit) to a color lookup palette entry which is supplied to
3 bit digital to analog converters to produce RGB output. The
following is a block diagram of the video controller:
<br>
</p>
<p>.9) 7 January 1986
<br>
<br>
</p>
<pre>
          ----- <a href="12.htm" target="UDOcon">Video</a> Controller Block Diagram ---------------

                 --------          --------        --------   lsb  --------
                | 3      |---- --&gt;|0 1 2 3 |-----&gt;|      0 |-----&gt;| 16 x 9 |-
               --------  |    |   |        |      |      1 |-----&gt;| Lookup |-|-&gt;R
              | 2      |------    |        |      |      2 |-----&gt;|        |-
             --------  | |    |   |        |      |      3 |-----&gt;|        |-
            | 1      |--------    |        |      |        |--    |        |-|-&gt;G
           --------  | |-     |    --------        --------   |   |        |-
          | 0      |----------                                |   |        |-
          |        | |-                                       |   |        |-|-&gt;B
          |        | |                                        |   |        |-
          |        |-                                         |    --------
          |        |                                          |    --------
           --------                                            --&gt;|Inverter|-&gt;MONO
                                                                   --------

          Logical BitMap          <a href="12.htm" target="UDOcon">Video</a> Display   <a href="12.htm" target="UDOcon">Video</a> Shift     Color Palette
          Planes                  Memory          Register        and 3 Bit DACs


</pre>
<p>
<br>
</p>
<p>.10) 7 January 1986
<br>
<br>
</p>
<p><tt> 4. Music Subsystem </tt>
<br>
<br>
</p>
<pre>
                   ----------                    ----------
                  |          |                  |Music     |
                  |          |                  |Subsystem |
                   ----------                    ----------
                        |                            |
                        |         ----------         |
                         --------|          |--------
                                 |          |
                                  ----------
                                       |
                                       |         ----------
                                        --------|          |
                                                |          |
                                                 ----------
</pre>
<p>
<br>
</p>
<p>The ST music subsystem is composed of a programmable sound
synthesizer and a musical instrument serial interface. The interface
provides high speed serial communication of musical data to and from
more sophisticated synthesizer dev- ice subsystems.
<br>
</p>
<p><tt> 4.1. Sound Synthesizer </tt>
<br>
<br>The YM-2149 Programmable Sound Generator produces music synthesis,
sound effects, and audio feedback (eg alarms and key clicks). With an
applied clock input of 2 MHz, the PSG is capable of providing a
frequency response range between 30 Hz (audible) and 125 KHz
(post-audible). The generator places a minimal amount of processing
burden on the main system (which acts as the sequencer) and has the
ability to perform using three independent voice channels. The three
sound channel outputs are mixed, along with <a href="1301.htm" target="UDOcon">Audio</a> In, and sent to an
external television or monitor speaker (the PSG has built in digital
to analog converters).
<br>
</p>
<p>The sound generator's internal registers are accessed via the PSG
Register Select Register (write only, reset: registers all zeros). The
tone generator registers control a basic square wave while the noise
generator register con- trols a frequency modulated square wave of
pseudo random pulse width. Tones and noise can be mixed over
individual channels by using the mixer control register. The amplitude
registers allow the specification of a fixed amplitude or of a
variable amplitude when used with the envelope generator. The envelope
generator registers permit the entry of a skewed
attack-decay-sustain-release envelope in the form of a
continue-attack-alternate-hold envelope.
<br>
</p>
<p>.11) 7 January 1986
<br>
<br>
</p>
<p><tt> 4.2. Musical Instrument Communication </tt>
<br>
<br>The Musical Instrument Digital Interface (MIDI) allows the
integration of the ST with music synthesizers, sequenc- ers, drum
boxes, and other devices possessing MIDI inter- faces. High speed
(31.25 Kbaud) serial communication of keyboard and program information
is provided by two ports, MIDI OUT and MIDI IN (MIDI OUT also supports
the optional MIDI THRU port).
<br>
</p>
<p>The MIDI bus permits up to 16 channels in one of three network
addressing modes: Omni (all units addressed simul- taneously, power up
default), Poly (each unit addressed separately), and Mono (each unit
voice addressed separately). <a href="0205.htm" target="UDOcon">Information</a> is communicated via five
types of data format (data bytes, most significant bit: status 1, data
0) which are prioritized from highest to lowest as: System Reset
(default conditions, should not be sent on power up to avoid
deadlock), System Exclusive (manufacturer unique data: Sequential
Circuits, Kawai, Roland, Korg, Yamaha), System Real Time
(synchronization), System Common (broadcast), and Channel (note
selections, program data, etc).
<br>
</p>
<p>.12) 7 January 1986
<br>
<br>
</p>
<p><tt> 5. Device Subsystems </tt>
<br>
<br>
</p>
<pre>
                   ----------                    ----------
                  |          |                  |          |
                  |          |                  |          |
                   ----------                    ----------
                        |                            |
                        |         ----------         |
                         --------|          |--------
                                 |          |
                                  ----------
                                       |
                                       |         ----------
                                        --------|Device    |
                                                |Subsystems|
                                                 ----------
</pre>
<p>
<br>
</p>
<p>The ST supports seven device subsystems: an intelli- gent
keyboard, video interface, parallel interface, RS232 interface, MIDI
interface, floppy disk interface, and hard disk interface. Included
with each device interface description is a port pin assignment chart
with the ST and programmable signals justified left (pins that are not
con- nected are not shown). The connector type on the ST is shown
above each pin list with an S designating a female socket and a P
designating a male plug.
<br>
</p>
<p><tt> 5.1. Intelligent <a href="0f01.htm" target="UDOcon">Keyboard</a> </tt>
<br>
<br>The Atari Intelligent <a href="0f01.htm" target="UDOcon">Keyboard</a> (ikbd) transmits encoded make/break
key scan codes (with two key rollover), mouse/trackball data, joystick
data, and time of day. The ikbd receives commands as well, with
bidirectional communi- cation controlled on the ST side by an MC6850
Asynchronous Communications Interface Adapter supplied with transmit
and receive clock inputs of 500 KHz. The data transfer rate is a
constant 7812.5 bits/sec which can be generated by setting the <a href="08010a.htm" target="UDOcon">ACIA</a>
Counter Divide Select to divide by 64. All ikbd functions such as key
scanning, mouse tracking, command parsing, etc. are performed by a 1
MHz HD6301V1 8 bit Micro- computer Unit.
<br>
</p>
<p>The ikbd is equipped with a combination mouse/joystick port and a
joystick only port. The Atari Two Button Mouse is a mechanical,
opto-mechanical, or optical mouse with the following minimal
performance characteristics: a resolution of 100 counts/inch (4
counts/mm), a maximum velocity of 10 inches/second (250 mm/second),
and a maximum pulse phase error of 50 percent. The Atari Joystick is a
4 direction
<br>
</p>
<p>.13) 7 January 1986
<br>
<br>
</p>
<p>switch-type joystick with one fire button. The ikbd can report
movement using one of three mouse/joystick modes: mouse with joystick,
disabled mouse with joystick, and joys- tick with joystick.
<br>
</p>
<pre>          ----- Mouse/Joystick0 Port Pin Assignments ---------------

             ST           DB 9P
                          ----                                    ----
          IKBD MATRIX       1 |&lt;--- XB Pulse / Up Switch --------|
          IKBD MATRIX       2 |&lt;--- XA Pulse / Down Switch ------|
          IKBD MATRIX       3 |&lt;--- YA Pulse / Left Switch ------|
          IKBD MATRIX       4 |&lt;--- YB Pulse / Right Switch -----|
          IKBD MCU          6 |&lt;--- Left Button / Fire Button ---|
                            7 |---- Power ----------------------&gt;|
                            8 |---- Ground ----------------------|
          IKBD MCU          9 |&lt;--- Right Button / Joy1 Fire ----|
                          ----                                    ----



          Signal Characteristics

                  mouse pins 1-4          TTL levels.
                  joystick0 pins 1-4      TTL levels.
                  pin 6                   TTL levels, closure to ground.
                  pin 7                   +5 VDC.
                  pin 9                   TTL levels, closure to ground.



          Mouse Phase Directions

                    POSITIVE RIGHT (UP)             NEGATIVE LEFT (DOWN)

                  .    -----       -----                  -----       -----
          XA (YA)     |     |     |     |                |     |     |     |
                      |     |     |     |                |     |     |     |
                  . --       -----       -----      -----       -----       --

                  .       -----       -----            -----       -----
          XB (YB)        |     |     |     |          |     |     |     |
                         |     |     |     |          |     |     |     |
                  . -----       -----       --      --       -----       -----

</pre>
<p>
<br>
</p>
<p>.14) 7 January 1986
<br>
<br>
</p>
<pre>


          ----- Joystick1 Port Pin Assignments ---------------

             ST           DB 9P
                          ----                                    ----
          IKBD MATRIX       1 |&lt;--- Up Switch -------------------|
          IKBD MATRIX       2 |&lt;--- Down Switch -----------------|
          IKBD MATRIX       3 |&lt;--- Left Switch -----------------|
          IKBD MATRIX       4 |&lt;--- Right Switch ----------------|
          IKBD MCU          6 |&lt;--- Fire Button -----------------|
                            7 |---- Power ----------------------&gt;|
                            8 |---- Ground ----------------------|
                          ----                                    ----



          Signal Characteristics

                  pins 1-4,6              TTL levels.
                  pin 7                   +5 VDC.

</pre>
<p>
<br>
</p>
<p><tt> 5.2. <a href="12.htm" target="UDOcon">Video</a> Interface </tt>
<br>
<br>
</p>
<p>The ST video display interface supports low resolution (320 x 200
or 640 x 200) television receivers and composite monitors, low
resolution (320 x 200 or 640 x 200) RGB moni- tors, and medium
resolution (640 x 400) monochrome monitors. Both NTSC and PAL color
encoding standards are available in two separate configurations of the
video interface hardware. For United States television receivers, the
modulated RF display signal is provided on two adjacent broadcast
chan- nels: channel 2 (55.25 MHz) and channel 3 (61.25 MHz). In order
to protect against monitor damage while in medium resolution
monochrome mode, the Monochrome Monitor Detect signal is provided as
an interrupt on the MK68901 Multi Function Peripheral and can be
tested to determine the pres- ence of a monochrome monitor (active
low, any change will generate the interrupt if enabled).
<br>
</p>
<p>External/Internal syncs and 50/60 Hz field rates are selected via
the Sync Mode Register (read/write, reset: all zeros). The YM-2149
Programmable Sound Generator I/O Port A provides a General Purpose
Output for use in the control of functions such as the remote
selection of monitor external or internal sync. Two autovector
interrupts are generated to allow software synchronization with
horizontal and verti- cal blanking intervals. The Horizontal Blanking
(down) Counter MFP Timer B has an active high input signal and pro-
duces an interrupt when the counter times out (Event Count Mode). The
horizontal blanking counter actually uses display enable, the first of
which occurs at the end of the
<br>
</p>
<p>.15) 7 January 1986
<br>
<br>
</p>
<p>first display line. The video display shift mode should be
selected during the vertical blanking interval.
<br>
</p>
<pre>          ----- <a href="12.htm" target="UDOcon">Video</a> Port Pin Assignments ---------------

             Television
             ST           RCA Pin Jack
                          ----                                    ----
                         core |---- RF Modulated <a href="12.htm" target="UDOcon">Video</a> ---------&gt;|
                       shield |---- Ground ----------------------|
                          ----                                    ----

             Monitor
             ST           Circular DIN 13S
                          ----                                    ----
                            1 |---- <a href="1301.htm" target="UDOcon">Audio</a> Out ------------------&gt;|
                            2 |---- Composite <a href="12.htm" target="UDOcon">Video</a> ------------&gt;|
          PSG I/O A         3 |---- General Purpose Output -----&gt;|
          MFP               4 |&lt;--- Monochrome Detect -----------|
                            5 |&lt;--- <a href="1301.htm" target="UDOcon">Audio</a> In --------------------|
                            6 |---- Green ----------------------&gt;|
                            7 |---- Red ------------------------&gt;|
                            8 |---- Peritel Power --------------&gt;|
                            9 |---- Horizontal Sync ------------&gt;|
                           10 |---- Blue -----------------------&gt;|
                           11 |---- Monochrome -----------------&gt;|
                           12 |---- Vertical Sync --------------&gt;|
                           13 |---- Ground ----------------------|
                          ----                                    ----



          Signal Characteristics

                  pin 1                   1 VDC peak to peak, 10 Kohm.
                  pin 2                   1 VDC peak to peak, 75 ohm.
                  pin 3                   TTL levels, assertion not assigned.
                  pin 4                   TTL levels, active low,
                                          1 Kohm pullup resistor to +5 VDC.
                  pin 5                   1 VDC peak to peak, 10 Kohm.
                  pins 6-7                1 VDC peak to peak, 75 ohm.
                  pin 8                   +12 VDC pullup.
                  pin 9                   5 VDC active low, 3.3 Kohm.
                  pin 10                  1 VDC peak to peak, 75 ohm.
                  pin 11                  1 VDC peak to peak, 75 ohm.
                  pin 12                  5 VDC active low, 3.3 Kohm.

</pre>
<p>
<br>
</p>
<p>.16) 7 January 1986
<br>
<br>
</p>
<p><tt> 5.3. Parallel Interface </tt>
<br>
<br>
</p>
<p>The ST parallel interface supports Centronics STROBE from the
YM-2149 PSG for data synchronization and Centronics BUSY to the
MK68901 MFP (ACKNLG is not supported) for handshaking. Eight bits of
read/write data are handled through I/O Port B on the PSG at a typical
data transfer rate of 4000 bytes/second.
<br>
</p>
<pre>          ----- Parallel Port Pin Assignments ---------------

             ST           DB 25S
                          ----                                    ----
          PSG I/O A         1 |---- Centronics STROBE ----------&gt;|
          PSG I/O B         2 |&lt;--- Data 0 ---------------------&gt;|
          PSG I/O B         3 |&lt;--- Data 1 ---------------------&gt;|
          PSG I/O B         4 |&lt;--- Data 2 ---------------------&gt;|
          PSG I/O B         5 |&lt;--- Data 3 ---------------------&gt;|
          PSG I/O B         6 |&lt;--- Data 4 ---------------------&gt;|
          PSG I/O B         7 |&lt;--- Data 5 ---------------------&gt;|
          PSG I/O B         8 |&lt;--- Data 6 ---------------------&gt;|
          PSG I/O B         9 |&lt;--- Data 7 ---------------------&gt;|
          MFP              11 |&lt;--- Centronics BUSY -------------|
                        18-25 |---- Ground ----------------------|
                          ----                                    ----



          Signal Characteristics

                  pin 1                   TTL levels, active low.
                  pins 2-9                TTL levels.
                  pin 11                  TTL levels, active high,
                                          1 Kohm pullup resistor to +5 VDC.

</pre>
<p>
<br>
</p>
<p><tt> 5.4. RS232 Interface </tt>
<br>
<br>The ST RS232 interface provides voltage level synchro- nous or
asynchronous serial communication. Five EIA RS232C handshake control
signals are supported: Request To Send and Data Terminal Ready are
transmitted through the YM-2149 PSG I/O Port A while Clear To Send,
Data Carrier Detect, and Ring Indicator are received through the
MK68901 MFP. The MFP USART transmit and receive clock inputs are
controlled by the Baud Rate Generator MFP Timer D which is supplied
with 2.4576 MHz and can support asynchronous data transfer rates from
50 to 19200 baud. One byte transmit and receive data buffers are
managed by the MFP USART, which provides monitoring of buffer
conditions and communication errors.
<br>
</p>
<p>.17) 7 January 1986
<br>
<br>
</p>
<pre>          ----- RS232 Port Pin Assignments ---------------

             ST           DB 25P
                          ----                                    ----
                            1 |---- Protective Ground -----------|
          MFP               2 |---- Transmitted Data -----------&gt;|
          MFP               3 |&lt;--- Received Data ---------------|
          PSG I/O A         4 |---- Request To Send ------------&gt;|
          MFP               5 |&lt;--- Clear To Send ---------------|
                            7 |---- Signal Ground ---------------|
          MFP               8 |&lt;--- Data Carrier Detect ---------|
          PSG I/O A        20 |---- Data Terminal Ready --------&gt;|
          MFP              22 |&lt;--- Ring Indicator --------------|
                          ----                                    ----



          Signal Characteristics

                  pins 2-5                RS232C levels.
                  pins 8,20,22            RS232C levels.

</pre>
<p>
<br>
</p>
<p><tt> 5.5. MIDI Interface </tt>
<br>
<br>
</p>
<p>The ST MIDI interface provides current loop asynchro- nous serial
communication controlled by an MC6850 <a href="08010a.htm" target="UDOcon">ACIA</a> sup- plied with transmit
and receive clock inputs of 500 KHz. The data transfer rate is a
constant 31.25 Kbaud which can be generated by setting the <a href="08010a.htm" target="UDOcon">ACIA</a>
Counter Divide Select to divide by 16. The MIDI specification calls
for serial data to consist of eight data bits preceded by a start bit
and followed by one stop bit.
<br>
</p>
<p>.18) 7 January 1986
<br>
<br>
</p>
<pre>

          ----- MIDI Port Pin Assignments ---------------

             MIDI OUT/THRU
             ST           Circular DIN 5S
                          ----                                    ----
          MIDI IN           1 |---- THRU Transmit Data ---------&gt;|
                            2 |---- Shield Ground ---------------|
                            3 |&lt;--- THRU Loop Return ------------|
          MIDI <a href="08010a.htm" target="UDOcon">ACIA</a>         4 |---- OUT Transmit Data ----------&gt;|
                            5 |&lt;--- OUT Loop Return -------------|
                          ----                                    ----

             MIDI IN
             ST           Circular DIN 5S
                          ----                                    ----
          MIDI <a href="08010a.htm" target="UDOcon">ACIA</a>         4 |&lt;--- IN Receive Data -------------|
                            5 |---- IN Loop Return -------------&gt;|
                          ----                                    ----



          Signal Characteristics

                  current loop            5 ma, zero is current on.
</pre>
<p>
<br>
</p>
<p><tt> 5.6. Disk Drive Interface </tt>
<br>
<br>The ST floppy disk drive interface is provided through the DMA
controller to an on board WD1772 Floppy Disk Con- troller. A total of
two daisy chained floppy disk drives (drive 0 or 1) can be supported.
Commands are sent to the FDC by first writing to the DMA Mode Control
Register to select the FDC internal command register and then writing
the desired one byte command to the Disk Controller Regis- ter. The
entire floppy disk DMA read or write sequence is as follows:
<br>
</p>
<pre>
          o  select floppy drive 0 or 1 (PSG I/O Port A).
          o  select floppy side 0 or 1 (PSG I/O Port A).
          o  load DMA Base Address and Counter Register.
          o  toggle Write/_Read to clear status (DMA Mode Control Register).
          o  select DMA read or write (DMA Mode Control Register).
          o  select DMA Sector Count Register (DMA Mode Control Register).
          o  load DMA Sector Count Register (DMA operation trigger).
          o  select FDC internal command register (DMA Mode Control Register).
          o  issue FDC read or write command (Disk Controller Register).
          o  DMA active until sector count is zero (DMA Status Register,
             do not poll during DMA active).
          o  issue FDC force interrupt command on multi-sector transfers

</pre>
<p>
<br>
</p>
<p>.19) 7 January 1986
<br>
<br>
</p>
<p>except at track boundaries (Disk Controller Register). o check DMA
error status (DMA Status Register, nondestructive).
<br>
</p>
<p>
<br>
</p>
<p>The detection of floppy disk removal is not supported in hardware.
<br>
<br>
</p>
<p>The ST hard disk drive interface is also provided through the DMA
controller, however the Atari Hard Disk Con- troller is off board and
is sent commands using an ANSI X3T9.2 SCSI-like (Small Computer
Systems Interface) command descriptor block protocol. The Atari Hard
Disk Interface (AHDI) supports a minimal subset of SCSI commands
(Class 0 OpCodes), which are dispatched using the following fixed six
byte Atari Computer System Interface (ACSI) command packet format:
<br>
</p>
<pre>          ----- ACSI Command Descriptor Block ---------------

                  Byte 0  |xxxxxxxx|
                           ||||||||
                           ||| -------- Operation Code
                            ----------- Controller Number
                  Byte 1  |xxxxxxxx|
                           ||||||||
                           |||--------- Block Address High
                            ----------- Device Number
                  Byte 2  |xxxxxxxx|
                           ||||||||
                            ----------- Block Address Mid
                  Byte 3  |xxxxxxxx|
                           ||||||||
                            ----------- Block Address Low
                  Byte 4  |xxxxxxxx|
                           ||||||||
                            ----------- Block Count
                  Byte 5  |xxxxxxxx|
                           ||||||||
                            ----------- Control Byte

</pre>
<p>
<br>
</p>
<p>The following is a summary of available command OpCodes:
<br>
</p>
<p>.20) 7 January 1986
<br>
<br>
</p>
<pre>

          ----- AHDI Command Summary Table ---------------

                   ---------- --------------------
                  | OpCode   | Command            |
                   ---------- --------------------
                  | 0x00     | Test Unit Ready    |
                  | 0x05     | Verify Track       |  *
                  | 0x06     | Format Track       |  *
                  | 0x08     | Read               |  *
                  | 0x0a     | Write              |  *
                  | 0x0b     | Seek               |
                  | 0x0d     | Correction Pattern |
                  | 0x15     | Mode Select        |
                  | 0x1a     | Mode Sense         |
                   ---------- --------------------

                   *  multisector transfer with implied seek

          NOTE:  subject to change.
</pre>
<p>
<br>
</p>
<p>Commands are issued to the Atari HDC in a manner simi- lar to that
of the FDC, with the major difference being the handshaking of a
multi-byte command descriptor block. The entire hard disk DMA read or
write sequence is as follows:
<br>
</p>
<pre>
          o  load DMA Base Address and Counter Register.
          o  toggle Write/_Read to clear status (DMA Mode Control Register).
          o  select DMA read or write (DMA Mode Control Register).
          o  select DMA Sector Count Register (DMA Mode Control Register).
          o  load DMA Sector Count Register (DMA operation trigger).
          o  select HDC internal command register (DMA Mode Control Register).
          o  issue controller select byte while clearing A0.
          o  set A0 for remaining command bytes.
          o  after last command byte select controller (DMA Mode Control
             Register).
          o  DMA active until sector count is zero (DMA Status Register,
             do not poll during DMA active).
          o  check DMA error status (DMA Status Register, nondestructive).
          o  check HDC status byte and if necessary perform ECC correction
             following a Verify Track or Read Sector command.

</pre>
<p>
<br>
</p>
<p>The format of both floppy and hard disks contain 512 byte data
sectors.
<br>
</p>
<p>.21) 7 January 1986
<br>
<br>
</p>
<pre>


          ----- Floppy Disk Port Pin Assignments ---------------

             ST           Circular DIN 14S
                          ----                                    ----
                            1 |&lt;--- Read Data -------------------|
          PSG I/O A         2 |---- Side0 Select ---------------&gt;|
                            3 |---- Logic Ground ----------------|
                            4 |&lt;--- Index Pulse -----------------|
          PSG I/O A         5 |---- Drive0 Select --------------&gt;|
          PSG I/O A         6 |---- Drive1 Select --------------&gt;|
                            7 |---- Logic Ground ----------------|
                            8 |---- Motor On -------------------&gt;|
                            9 |---- Direction In ---------------&gt;|
                           10 |---- Step -----------------------&gt;|
                           11 |---- Write Data -----------------&gt;|
                           12 |---- Write Gate -----------------&gt;|
                           13 |&lt;--- Track 00 --------------------|
                           14 |&lt;--- Write Protect ---------------|
                          ----                                    ----

          NOTE:  shield ground must not be connected on the ST side,
                 the cable must have Read Data and Write Data paired
                 with Logic Grounds.



          Signal Characteristics

                  pin 1                   TTL levels, active low,
                                          1 Kohm pullup resistor to +5 VDC.
                  pin 2                   TTL levels, active high,
                                          high at system reset.
                  pin 4                   TTL levels, active low,
                                          1 Kohm pullup resistor to +5 VDC.
                  pins 5-6                TTL levels, active low,
                                          high at system reset.
                  pins 8-12               TTL levels, active low (inverted).
                  pins 13-14              TTL levels, active low,
                                          1 Kohm pullup resistors to +5 VDC.

</pre>
<p>
<br>
</p>
<p>.22) 7 January 1986
<br>
<br>
</p>
<pre>

          ----- Hard Disk Port Pin Assignments ---------------

             ST           DB 19S
                          ----                                    ----
                            1 |&lt;--- Data 0 ---------------------&gt;|
                            2 |&lt;--- Data 1 ---------------------&gt;|
                            3 |&lt;--- Data 2 ---------------------&gt;|
                            4 |&lt;--- Data 3 ---------------------&gt;|
                            5 |&lt;--- Data 4 ---------------------&gt;|
                            6 |&lt;--- Data 5 ---------------------&gt;|
                            7 |&lt;--- Data 6 ---------------------&gt;|
                            8 |&lt;--- Data 7 ---------------------&gt;|
                            9 |---- Chip Select ----------------&gt;|
          MFP              10 |&lt;--- Interrupt Request -----------|
                           11 |---- Ground ----------------------|
                           12 |---- Reset ----------------------&gt;|
                           13 |---- Ground ----------------------|
                           14 |---- Acknowledge ----------------&gt;|
                           15 |---- Ground ----------------------|
                           16 |---- A1 -------------------------&gt;|
                           17 |---- Ground ----------------------|
                           18 |---- Read/Write -----------------&gt;|
                           19 |&lt;--- Data Request ----------------|
                          ----                                    ----



          Signal Characteristics

                  pins 1-8                TTL levels.
                  pin 9                   TTL levels, active low.
                  pin 10                  TTL levels, active low,
                                          1 Kohm pullup resistor to +5 VDC.
                  pin 12                  TTL levels, active low,
                                          system reset.
                  pin 14                  TTL levels, active low.
                  pins 16,18              TTL levels.
                  pin 19                  TTL levels, active low,
                                          1 Kohm pullup resistor to +5 VDC.

</pre>
<p>
<br>
</p>
<p>.23) 7 January 1986
<br>
<br>
</p>
<p><tt> 6. Components </tt>
<br>
<br>
</p>
<p>The standard configurations of the <a href="0305.htm" target="UDOcon">Atari ST</a> main sys- tem,
graphics subsystem, music subsystem, and device subsys- tems are made
up of the following major hardware components:
<br>
</p>
<dl>
<dt><b>Main</b></dt><dd> o 8 MHz MC68000 Microprocessor Unit o MK68901 Multi Function
Peripheral o 192 Kbyte ROM o 512 Kbyte or 1 Mbyte RAM o Memory
Controller Chip o Control Logic Chip o DMA Controller Chip
<br>&nbsp;
<dt><b>Graphics</b></dt><dd> o 32 Kbyte Display Memory (from main RAM) o <a href="12.htm" target="UDOcon">Video</a> Shift Register
Chip
<br>&nbsp;
<dt><b>Music</b></dt><dd> o YM-2149 Programmable Sound Generator
<br>&nbsp;
<dt><b>Device</b></dt><dd> o Atari Intelligent <a href="0f01.htm" target="UDOcon">Keyboard</a> (ikbd) 1 MHz HD6301V1 Microcomputer
Unit o Atari Two Button Mouse o 2 MC6850 Asynchronous Communications
Interface Adapters o WD1772 Floppy Disk Controller
<br>&nbsp;
</dl>
<p>
<br>
</p>
<p>.24) 7 January 1986
<br>
<br>
</p>
<p><tt> 7. Expansion </tt>
<br>
<br>The <a href="0305.htm" target="UDOcon">Atari ST</a> can be expanded by cartridge ROM only which can
contain a maximum of 128 Kbyte. The disclosure of cartridge presence
or memory size is not supported in hardware. The ROM cartridge slot
has the following pin assignments (only the lower 15 address lines are
available):
<br>
</p>
<pre>          ----- ROM Port Pin Assignments ---------------

             ST           40S
                          ----                                    ----
                            1 |---- Power +5 VDC ---------------&gt;|
                            2 |---- Power +5 VDC ---------------&gt;|
                            3 |&lt;--- Data 14 ---------------------|
                            4 |&lt;--- Data 15 ---------------------|
                            5 |&lt;--- Data 12 ---------------------|
                            6 |&lt;--- Data 13 ---------------------|
                            7 |&lt;--- Data 10 ---------------------|
                            8 |&lt;--- Data 11 ---------------------|
                            9 |&lt;--- Data 8 ----------------------|
                           10 |&lt;--- Data 9 ----------------------|
                           11 |&lt;--- Data 6 ----------------------|
                           12 |&lt;--- Data 7 ----------------------|
                           13 |&lt;--- Data 4 ----------------------|
                           14 |&lt;--- Data 5 ----------------------|
                           15 |&lt;--- Data 2 ----------------------|
                           16 |&lt;--- Data 3 ----------------------|
                           17 |&lt;--- Data 0 ----------------------|
                           18 |&lt;--- Data 1 ----------------------|
                           19 |---- Address 13 -----------------&gt;|
                           20 |---- Address 15 -----------------&gt;|
                           21 |---- Address 8 ------------------&gt;|
                           22 |---- Address 14 -----------------&gt;|
                           23 |---- Address 7 ------------------&gt;|
                           24 |---- Address 9 ------------------&gt;|
                           25 |---- Address 6 ------------------&gt;|
                           26 |---- Address 10 -----------------&gt;|
                           27 |---- Address 5 ------------------&gt;|
                           28 |---- Address 12 -----------------&gt;|
                           29 |---- Address 11 -----------------&gt;|
                           30 |---- Address 4 ------------------&gt;|
                           31 |---- ROM3 Select ----------------&gt;|
                           32 |---- Address 3 ------------------&gt;|
                           33 |---- ROM4 Select ----------------&gt;|
                           34 |---- Address 2 ------------------&gt;|
                           35 |---- _Upper Data Strobe ---------&gt;|
                           36 |---- Address 1 ------------------&gt;|
                           37 |---- _Lower Data Strobe ---------&gt;|
                        38-40 |---- Ground ----------------------|
                          ----                                    ----

</pre>
<p>
<br>
</p>
<p>.25) 7 January 1986
<br>
<br>
</p>
<p><tt> 8. Memory Map </tt>
<br>
</p>
<p>The first 2 Kbyte of ST memory is reserved for the exception
vector table and supervisor stack. This area along with I/O space is
protected for supervisor references only. Accessing supervisor
protected areas while in the user state will result in a bus error. A
4 word portion of ROM is shadowed at the start of RAM for the reset
stack pointer and program counter. Writing to this area or any ROM
location will also result in a bus error. The following is a map of ST
memory:
<br>
</p>
<p>.26) 7 January 1986
<br>
<br>
</p>
<pre>
          ----- ST Memory Map ---------------

                             ----------------
                  00 0000   | ROM            |   Reset:  Supervisor Stack Pointer
                  00 0004   | ROM            |   Reset:  Program Counter
                  00 0008   | RAM            |   0 Kbyte RAM
                             ----------------
                              .
                             ----------------
                  08 0000   | RAM            |   512 Kbyte RAM
                             ----------------
                              .
                             ----------------
                  10 0000   | RAM            |   1 Mbyte RAM
                             ----------------
                              .
                              .
                              .
                             ----------------
                  fa 0000   | ROM            |   320 Kbyte ROM
                             ----------------
                              .
                             ----------------
                  fc 0000   | ROM            |   Reset:  Supervisor Stack Pointer
                  fc 0004   | ROM            |   Reset:  Program Counter
                  fc 0008   | ROM            |   192 Kbyte ROM
                  fe ffff   | ROM            |   0 Kbyte ROM
                             ----------------
                              .
                              .
                              .
                             ----------------
                  ff 8000   | I/O            |   Configuration Registers
                  ff 8200   | I/O            |   Display Registers
                  ff 8400   | I/O            |   Reserved
                  ff 8600   | I/O            |   DMA/Disk Registers
                  ff 8800   | I/O            |   Sound Registers
                             ----------------
                              .
                             ----------------
                  ff fa00   | I/O            |   MC68xxx Registers
                  ff fc00   | I/O            |   MC68xx Registers
                             ----------------

</pre>
<p>
<br>
</p>
<p>.27) 7 January 1986
<br>
<br>
</p>
<p><tt> 9. I/O Map </tt>
<br>
<br>The ST I/O space ranges from ff 0000 to ff ffff, with MC68000 and
MC6800 peripheral internal registers starting at ff fa00 and ff fc00
respectively. Accessing reserved I/O addresses will result in a bus
error. Bit values for vari- ous read and/or write registers are
labeled as active One/_Zero (always mask out unused field bits). The
follow- ing is a map of ST I/O space:
<br>
</p>
<pre>          _____________
          Configuration

          ff 8001   R/W             |----xxxx|   Memory Configuration
                                         ||||
                                          -------   Bank0      Bank1 (not used)
                                         0000       128 Kbyte  128 Kbyte
                                         0001       128 Kbyte  512 Kbyte
                                         0010       128 Kbyte    2 Mbyte
                                         0011       Reserved
                                         0100       512 Kbyte  128 Kbyte
                                         0101       512 Kbyte  512 Kbyte
                                         0110       512 Kbyte    2 Mbyte
                                         0111       Reserved
                                         1000         2 Mbyte  128 Kbyte
                                         1001         2 Mbyte  512 Kbyte
                                         1010         2 Mbyte    2 Mbyte
                                         1011       Reserved
                                         11xx       Reserved

          _______
          Display

          ff 8201   R/W             |xxxxxxxx|   <a href="12.htm" target="UDOcon">Video</a> Base High
          ff 8203   R/W             |xxxxxxxx|   <a href="12.htm" target="UDOcon">Video</a> Base Low

          ff 8205   R               |xxxxxxxx|   <a href="12.htm" target="UDOcon">Video</a> Address Counter High
          ff 8207   R               |xxxxxxxx|   <a href="12.htm" target="UDOcon">Video</a> Address Counter Mid
          ff 8209   R               |xxxxxxxx|   <a href="12.htm" target="UDOcon">Video</a> Address Counter Low

          ff 820a   R/W             |------xx|   Sync Mode
                                           ||
                                           | ----   External/_Internal Sync
                                            -----   50 Hz/_60 Hz Field Rate

          ff 8240   R/W     |-----xxx-xxx-xxx|   Palette Color 0/0 (Border)
                                  ||| ||| |||
                                  ||| ||| || ----   Inverted/_Normal Monochrome
                                  ||| ||| |||
                                  ||| |||  ------   Blue
                                  |||  ----------   Green
                                   --------------   Red
          ff 8242   R/W     |-----xxx-xxx-xxx|   Palette Color 1/1

</pre>
<p>
<br>
</p>
<p>.28) 7 January 1986
<br>
<br>
</p>
<pre>

          ff 8244   R/W     |-----xxx-xxx-xxx|   Palette Color 2/2
          ff 8246   R/W     |-----xxx-xxx-xxx|   Palette Color 3/3
          ff 8248   R/W     |-----xxx-xxx-xxx|   Palette Color 4
          ff 824a   R/W     |-----xxx-xxx-xxx|   Palette Color 5
          ff 824c   R/W     |-----xxx-xxx-xxx|   Palette Color 6
          ff 824e   R/W     |-----xxx-xxx-xxx|   Palette Color 7
          ff 8250   R/W     |-----xxx-xxx-xxx|   Palette Color 8
          ff 8252   R/W     |-----xxx-xxx-xxx|   Palette Color 9
          ff 8254   R/W     |-----xxx-xxx-xxx|   Palette Color 10
          ff 8256   R/W     |-----xxx-xxx-xxx|   Palette Color 11
          ff 8258   R/W     |-----xxx-xxx-xxx|   Palette Color 12
          ff 825a   R/W     |-----xxx-xxx-xxx|   Palette Color 13
          ff 825c   R/W     |-----xxx-xxx-xxx|   Palette Color 14
          ff 825e   R/W     |-----xxx-xxx-xxx|   Palette Color 15

          ff 8260   R/W             |------xx|   Shift Mode
                                           ||
                                           00       320 x 200, 4 Plane
                                           01       640 x 200, 2 Plane
                                           10       640 x 400, 1 Plane
                                           11       Reserved

          ________
          RESERVED

          ff 8400           |----------------|   Reserved

          ________
          DMA/Disk

          ff 8600           |----------------|   Reserved
          ff 8602           |----------------|   Reserved

          ff 8604   R/W     |--------xxxxxxxx|   Disk Controller (Word Access)

          ff 8606   R       |-------------xxx|   DMA Status (Word Access)
                                          |||
                                          || ----   _Error Status
                                          | -----   _Sector Count Zero Status
                                           ------   _Data Request Inactive Status
          ff 8606   W       |-------xxxxxxxx-|   DMA Mode Control (Word Access)
                                    ||||||||
                                    ||||||| -----   A0
                                    |||||| ------   A1
                                    ||||| -------   HDC/_FDC Register Select
                                    |||| --------   Sector Count Register Select
                                    |||0            Reserved
                                    || ----------   Disable/_Enable DMA
                                    | -----------   FDC/_HDC
                                     ------------   Write/_Read

          ff 8609   R/W             |xxxxxxxx|   DMA Base and Counter High
          ff 860b   R/W             |xxxxxxxx|   DMA Base and Counter Mid

</pre>
<p>
<br>
</p>
<p>.29) 7 January 1986
<br>
<br>
</p>
<pre>
          ff 860d   R/W             |xxxxxxxx|   DMA Base and Counter Low

          _____
          Sound

          ff 8800   R               |xxxxxxxx|   PSG Read Data
                                     ||||||||       I/O Port B
                                      --------------   Parallel Interface Data
          ff 8800   W               |xxxxxxxx|   PSG Register Select
                                         ||||
                                          -------   Register Number
                                         0000       Channel A Fine Tune
                                         0001       Channel A Coarse Tune
                                         0010       Channel B Fine Tune
                                         0011       Channel B Coarse Tune
                                         0100       Channel C Fine Tune
                                         0101       Channel C Coarse Tune
                                         0110       Noise Generator Control
                                         0111       Mixer Control - I/O Enable
                                         1000       Channel A Amplitude
                                         1001       Channel B Amplitude
                                         1010       Channel C Amplitude
                                         1011       Envelope Period Fine Tune
                                         1100       Envelope Period Coarse Tune
                                         1101       I/O Port A (Output Only)
                                         1111       I/O Port B

          ff 8802   W               |xxxxxxxx|   PSG Write Data
                                     ||||||||       I/O Port A
                                     ||||||| -------   Floppy Side0/_Side1 Select
                                     |||||| --------   Floppy _Drive0 Select
                                     ||||| ---------   Floppy _Drive1 Select
                                     |||| ----------   RS232 Request To Send
                                     ||| -----------   RS232 Data Terminal Ready
                                     || ------------   Centronics _STROBE
                                     | -------------   General Purpose Output
                                      --------------   Reserved
                                     ||||||||       I/O Port B
                                      --------------   Parallel Interface Data

          _______
          MC68xxx

          ff fa01                   |xxxxxxxx|   MFP General Purpose I/O
          ff fa03                   |xxxxxxxx|   MFP Active Edge
          ff fa05                   |xxxxxxxx|   MFP Data Direction
          ff fa07                   |xxxxxxxx|   MFP Interrupt Enable A
          ff fa09                   |xxxxxxxx|   MFP Interrupt Enable B
          ff fa0b                   |xxxxxxxx|   MFP Interrupt Pending A
          ff fa0d                   |xxxxxxxx|   MFP Interrupt Pending B
          ff fa0f                   |xxxxxxxx|   MFP Interrupt In-Service A
          ff fa11                   |xxxxxxxx|   MFP Interrupt In-Service B
          ff fa13                   |xxxxxxxx|   MFP Interrupt Mask A

</pre>
<p>
<br>
</p>
<p>.30) 7 January 1986
<br>
<br>
</p>
<pre>

          ff fa15                   |xxxxxxxx|   MFP Interrupt Mask B
          ff fa17                   |xxxxxxxx|   MFP Vector
          ff fa19                   |xxxxxxxx|   MFP Timer A Control
          ff fa1b                   |xxxxxxxx|   MFP Timer B Control
          ff fa1d                   |xxxxxxxx|   MFP Timers C and D Control
          ff fa1f                   |xxxxxxxx|   MFP Timer A Data
          ff fa21                   |xxxxxxxx|   MFP Timer B Data
          ff fa23                   |xxxxxxxx|   MFP Timer C Data
          ff fa25                   |xxxxxxxx|   MFP Timer D Data
          ff fa27                   |xxxxxxxx|   MFP Sync Character
          ff fa29                   |xxxxxxxx|   MFP USART Control
          ff fa2b                   |xxxxxxxx|   MFP Receiver Status
          ff fa2d                   |xxxxxxxx|   MFP Transmitter Status
          ff fa2f                   |xxxxxxxx|   MFP USART Data

          ______
          MC68xx

          ff fc00                   |xxxxxxxx|   <a href="0f01.htm" target="UDOcon">Keyboard</a> <a href="08010a.htm" target="UDOcon">ACIA</a> Control
          ff fc02                   |xxxxxxxx|   <a href="0f01.htm" target="UDOcon">Keyboard</a> <a href="08010a.htm" target="UDOcon">ACIA</a> Data

          ff fc04                   |xxxxxxxx|   MIDI <a href="08010a.htm" target="UDOcon">ACIA</a> Control
          ff fc06                   |xxxxxxxx|   MIDI <a href="08010a.htm" target="UDOcon">ACIA</a> Data

</pre>
<p>
<br>
</p>
<p>.31) 7 January 1986
<br>
<br>
</p>
<p><tt> 10. Interrupt Table </tt>
<br>The following tables list the ST interrupt and signal priority
assignments:
<br>
</p>
<pre>
          ----- MC68000 Interrupt Autovector ---------------

                   --------------- --------------------------------
                  | Level         | Definition                     |
                   --------------- --------------------------------
                  | 7 (HIGHEST)   | NMI                            |
                  | 6             | MK68901 MFP                    |
                  | 5             |                                |
                  | 4             | Vertical Blanking (Sync)       |
                  | 3             |                                |
                  | 2             | Horizontal Blanking (Sync)     |
                  | 1 (LOWEST)    |                                |
                   --------------- --------------------------------

          NOTE:  only interrupt priority level inputs 1 and 2 are used.


          ----- MK68901 Interrupt Control ---------------

                   --------------- --------------------------------
                  | Priority      | Definition                     |
                   --------------- --------------------------------
                  | 15 (HIGHEST)  | Monochrome Monitor Detect    I7|
                  | 14            | RS232 Ring Indicator         I6|
                  | 13            | System Clock / BUSY          TA|
                  | 12            | RS232 Receive Buffer Full      |
                  | 11            | RS232 Receive Error            |
                  | 10            | RS232 Transmit Buffer Empty    |
                  |  9            | RS232 Transmit Error           |
                  |  8            | Horizontal Blanking Counter  TB|
                  |  7            | Disk Drive Controller        I5|
                  |  6            | <a href="0f01.htm" target="UDOcon">Keyboard</a> and MIDI            I4|
                  |  5            | Timer C                      TC|
                  |  4            | RS232 Baud Rate Generator    TD|
                  |  3            | GPU Operation Done           I3|
                  |  2            | RS232 Clear To Send          I2|
                  |  1            | RS232 Data Carrier Detect    I1|
                  |  0 (LOWEST)   | Centronics BUSY              I0|
                   --------------- --------------------------------

          NOTE:  the MC6850 <a href="08010a.htm" target="UDOcon">ACIA</a> Interrupt Request status bit must be tested
                 to differentiate between keyboard and MIDI interrupts.

</pre>
<p>
<br>
</p>
<p>.32) 7 January 1986
<br>
<br>
</p>
<p><tt> 11. Case Design </tt>
<br>
<br>
</p>
<p>The ST is primarily designed as a keyboard computer with external
video display, disk drives, and power supply. The top panel contains
the keyboard, ventilation slots (bot- tom also), and power on LED. The
side panels contain the expansion ROM slot and mouse/joystick ports.
The back panel contains the on/off switch, reset button, channel
select switch, power connector, and all remaining device connec- tors:
video, parallel, RS232, MIDI, and disk drive inter- faces.
<br>
</p>
<p>The device ports are labeled with International Elec- trotechnical
Commission-like symbols in combinations of pic- tograms and phonetic
transcriptions (captions). In the case of MIDI, the specification
explicitly requires that the MIDI connectors be labeled MIDI OUT, MIDI
IN, and MIDI THRU (if applicable).
<br>
</p>
<p>.33) 7 January 1986
<br>
<br>
</p>
<p><tt> 12. Power Supply </tt>
<br>
<br>
</p>
<p>An external DC power supply provides power to the main system
board, keyboard, expansion ROM, and expansion RAM. All power levels
are regulated for over-voltage and over- current protection. The
following are minimal power supply specifications:
<br>
</p>
<pre>
          AC Input                115 VAC 10% at 60 Hz (fused)

          DC Output               +5 VDC at 3 A 5%
                                  +12 VDC at .03 A 10%
                                  -12 VDC at .03 A 10%


          ----- Power Port Pin Assignments ---------------

             ST           DIN 7P
                          ----                                    ----
                            1 |&lt;--- +5 VDC ----------------------|
                            3 |---- Ground ----------------------|
                            4 |&lt;--- +12 VDC ---------------------|
                            5 |&lt;--- -12 VDC ---------------------|
                            6 |&lt;--- +5 VDC ----------------------|
                            7 |---- Ground ----------------------|
                          ----                                    ----


</pre>
<p>
<br>
</p>
<p>.34) 7 January 1986
<br>
<br>
</p>
<p><tt> Appendix A - ikbd <a href="0f01.htm" target="UDOcon">Keyboard</a> Layout </tt>
<br>
<br>
</p>
<p>The surface of the Atari Intelligent <a href="0f01.htm" target="UDOcon">Keyboard</a> is formed from four
distinct ergonomic units: a QWERTY typewriter matrix, a function key
array, a screen control cluster, and a calculator numeric keypad. As a
whole, the United States version of the keyboard layout is DEC
VT100-like with the exception of the following items:
<br>
</p>
<pre>
          o  removed keys -- [break], [line feed], [no scroll], [set up].

          o  repositioned keys -- [caps lock], cursor control keys,
             programmable function keys.

          o  added keys -- [alternate], [help], [undo], [insert], [clear/home],
             10 programmable function keys.

          o  improvements -- DEC VT200-style inverted T cursor control
             keys, full calculator function numeric keypad.
</pre>
<p>
<br>
</p>
<p>Please note that the left [shift] key is intentionally large to
allow space for an extra ISO required key (see ISO 2530-1975). Atari
ikbd International Layouts will be designed for the following
countries:
<br>
</p>
<pre>
          o  United Kingdom
          o  United States
          o  Finland
          o  Norway / Denmark
          o  Sweden
          o  Japan
          o  Germany
          o  French Canada
          o  France
          o  Italy
          o  Spain

          NOTE:  the 'HELP' and 'UNDO' keys will be left untranslated.

</pre>
<p>
<br>
</p>
<p>.35) 7 January 1986
<br>
<br>
</p>
<p><tt> Appendix B - Rpp_ferences </tt>
<br>
<br>
</p>
<dl>
<dt><b>General</b></dt><dd>
<br>&nbsp;
<br>A Hitchhiker's Guide to the BIOS
<br>&nbsp;
<br>Digital Research GEM Software Documentation
<br>&nbsp;
<dt><b>Main System</b></dt><dd>
<br>&nbsp;
<br>Motorola MC68000 16-Bit Microprocessor User's Manual, Fourth
Edition
<br>&nbsp;
<br>Mostek MK68901 Multi Function Peripheral Data Sheet
<br>&nbsp;
<dt><b>Graphics Subsystem</b></dt><dd>
<br>&nbsp;
<br>Adele Goldberg and David Robson, 'Smalltalk-80: The Language and
Its Implementation', Addison-Wesley, Read- ing Massachusetts, 1983,
Chapter 18.
<br>&nbsp;
<dt><b>Music Subsystem</b></dt><dd>
<br>&nbsp;
<br>General Instrument AY-3-8910 Programmable Sound Genera- tor Data
Sheet
<br>&nbsp;
<br>MIDI Musical Instrument Digital Interface Specification 1.0
<br>&nbsp;
<dt><b>Device Subsystems</b></dt><dd>
<br>&nbsp;
<br>Atari Intelligent <a href="0f01.htm" target="UDOcon">Keyboard</a> (ikbd) Protocol and Specifi- cation
<br>&nbsp;
<br>Motorola MC6850 Asynchronous Communications Interface Adapter Data
Sheet
<br>&nbsp;
<br>Centronics Parallel Interface Specification
<br>&nbsp;
<br>Electronic Industries Association RS232C Standard
<br>&nbsp;
<br>Western Digital WD1770/1772 Floppy Disk Controller Data Sheet
<br>&nbsp;
<br>Specification of the Atari Computer System Interface (ACSI)
<br>&nbsp;
<br>Specification of the Atari Hard Disk Interface (AHDI)
<br>&nbsp;
</dl>
<p>
<br>
</p>
<p>.36) 7 January 1986
<br>
<br>
</p>
<p><tt> Appendix C - Notes </tt>
<br>
<br>
</p>
<dl>
<dt><b>General</b></dt><dd>
<br>&nbsp;
<br>851125A An address error occurs when a word instruction is used on
a byte address.
<br>&nbsp;
<dt><b>Main System</b></dt><dd>
<br>&nbsp;
<br>841017B The DMA Base Address and Counter Register must be loaded
in low, mid, high order.
<br>&nbsp;
<dt><b>Graphics Subsystem</b></dt><dd>
<br>&nbsp;
<br>841017C None.
<br>&nbsp;
<dt><b>Music Subsystem</b></dt><dd>
<br>&nbsp;
<br>841017D The YM-2149 PSG I/O space and registers should be set up
as critical regions in software.
<br>&nbsp;
<dt><b>Device Subsystems</b></dt><dd>
<br>&nbsp;
<br>841017F Poll or service the Disk Drive Controller inter- rupt on
the MK68901 MFP General Purpose I/O Regis- ter to detect the
completion of a <a href="080103.htm" target="UDOcon">WD1772 FDC</a> com- mand. Do not poll the FDC Busy or DMA
Sector Count Zero status bits.
<br>&nbsp;
<br>841017G Select the Sector Count Register before testing the DMA
Status Register Error bit.
<br>&nbsp;
<br>841017H Do not set the 30 ms Settling Delay bit on <a href="080103.htm" target="UDOcon">WD1772 FDC</a> type
2 and 3 command executions.
<br>&nbsp;
<br>841017I A force interrupt should be issued after a few seconds (ie
time out) on all commands sent to the <a href="080103.htm" target="UDOcon">WD1772 FDC</a>.
<br>&nbsp;
<br>841017J Wait until the <a href="080103.htm" target="UDOcon">WD1772 FDC</a> Motor On status is low before
deselecting a floppy drive.
<br>&nbsp;
<br>841017K A floppy disk drive configuration table should be
maintained in software to accommodate a diverse selection of 3.5 inch
floppy disk drives. Two floppy disk drives currently under evaluation
have the following characteristics: o 500 Kbyte unformatted, 80
cylinders, one head, 3 ms stepping rate. o 1 Mbyte unformatted, 80
cylinders, two heads, 3 ms stepping rate.
<br>&nbsp;
</dl>
<p>
<br>
</p>
<pre>          Table of Contents


          1.  System Architecture ...............................    1

          2.  Main System .......................................    4
            2.1.  Microprocessor Unit ...........................    4
            2.2.  Memory Configuration ..........................    4
            2.3.  Direct Memory Access ..........................    5

          3.  Graphics Subsystem ................................    7
            3.1.  <a href="12.htm" target="UDOcon">Video</a> Display Memory ..........................    7
            3.2.  <a href="12.htm" target="UDOcon">Video</a> Configuration ...........................    8

          4.  Music Subsystem ...................................   10
            4.1.  Sound Synthesizer .............................   10
            4.2.  Musical Instrument Communication ..............   10

          5.  Device Subsystems .................................   12
            5.1.  Intelligent <a href="0f01.htm" target="UDOcon">Keyboard</a> ..........................   12
            5.2.  <a href="12.htm" target="UDOcon">Video</a> Interface ...............................   14
            5.3.  Parallel Interface ............................   15
            5.4.  RS232 Interface ...............................   16
            5.5.  MIDI Interface ................................   17
            5.6.  Disk Drive Interface ..........................   18

          6.  Components ........................................   23

          7.  Expansion .........................................   24

          8.  Memory Map ........................................   25

          9.  I/O Map ...........................................   27

          10.  Interrupt Table ..................................   31

          11.  Case Design ......................................   32

          12.  Power Supply .....................................   33

          Appendix A -- ikbd <a href="0f01.htm" target="UDOcon">Keyboard</a> Layout ....................   34

          Appendix B -- References ..............................   35

          Appendix C -- Notes ...................................   36

</pre>
<p>
<br>
<br>
</p>
<p align=center><img src="image/sline.gif" border=0 width="640" height="2"></p><br>
<p align=center><img src="image/img.gif" border=0 width="50" height="40"></p><br>

<hr>
<address>Copyright &copy; <a href="http://www.doitarchive.de/">Robert Schaffner</a> (<a href="mailto:doit@doitarchive.de">doit@doitarchive.de</a>)<br>
Letzte Aktualisierung am 23. Mai 2004</address>
</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" border=0 width="24" height="24"></a>
<a href="03.htm" target="UDOcon"><img src="udo_up.gif" alt="Atari ST Series Hardware" border=0 width="24" height="24"></a>
<a href="030704.htm" target="UDOcon"><img src="udo_lf.gif" alt="STBook Stromversorgung" border=0 width="24" height="24"></a>
<a href="0309.htm" target="UDOcon"><img src="udo_rg.gif" alt="Spezifikation Atari STe" border=0 width="24" height="24"></a>
</td></tr></table>
</body></html>

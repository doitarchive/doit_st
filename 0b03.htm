<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!-- last modified on 23.05.2004 -->
<html>
<head>
<title>
DOIT_ST - Tips u. Tricks zur Atari Serie: HD Disk ST
</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Generator" content="UDO6 PL14 for TOS">
<meta name="Email" content="doit@doitarchive.de">
<link rev=made href="mailto:doit@doitarchive.de" title="E-Mail">
<link rel=home href="doitst1h.htm" title="Homepage">
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" alink="#FF0000" vlink="#800080">

<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" border=0 width="24" height="24"></a>
<a href="0b.htm" target="UDOcon"><img src="udo_up.gif" alt="Diskettenlaufwerke" border=0 width="24" height="24"></a>
<a href="0b0201.htm" target="UDOcon"><img src="udo_lf.gif" alt="DD-HD Switch" border=0 width="24" height="24"></a>
<a href="0b0301.htm" target="UDOcon"><img src="udo_rg.gif" alt="HD Disk STe" border=0 width="24" height="24"></a>
</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr>
<td valign=top width="8">&nbsp;</td><td valign=top width="100%">
<h1><a name="HD_20Disk_20ST">11.3 HD Disk ST</a></h1>
<p align=center><img src="image/sline.gif" border=0 width="640" height="2"></p><br>
<p><tt> High Density Disk Drive Modification by Randy Kwak </tt>
<br>
<br>
</p>
<p>What you need:
<br>
</p>
<p>- CO25914 (<a href="12.htm" target="UDOcon">Video</a> <a href="080106.htm" target="UDOcon">Shifter</a> Chip) contained by every <a href="0305.htm" target="UDOcon">Atari ST</a>
<br>
<br>- WDC 1772 02-02 chip (floppy controller chip) contained in most
(newer)
<br>STFM's, Megas, and (probably) STE's, etc. According to
<br>&quot;<a href="0305.htm" target="UDOcon">Atari ST</a> Review (Mar., 1993)&quot;, 95% of these chips
<br>will work at both 8 MHz and 16 MHz
<br>
</p>
<p>N.B. If your floppy controller chip is the older
&quot;00-02&quot;, it will
<br>*NOT* work (but it will fry nicely). A chip upgrade is needed
<br>for the mod. (N.B. I do *NOT* have or need an <a href="040a.htm" target="UDOcon">AJAX</a> chip!!!)
<br>
</p>
<p>- HD floppy drive
<br>I have an older Chinon and TEAC with multiple jumpers which work
<br>fine. Make sure you change the drive setting from &quot;1&quot;
(typical
<br>IBM setting) to &quot;0&quot; (Atari setting).
<br>(1997 note: many recent HD drive have *NO* jumpers whatsoever
<br>and may not work in an ATARI; see if you can try before you buy.)
<br>
<br>What to do:
<br>
</p>
<p>Desolder pin 18 (&quot;clock&quot;) of your drive controller chip
and bend it up and out of the hole. Solder a wire to it. Connnecting
the wire to the (now empty) hole gives you an 8 MHz clock (double
density). Connecting the wire to pin 39 (&quot;16 MHz out&quot;) of
the video shifter chip gives you a 16 MHz clock (high density).
<br>
</p>
<p>I have installed a toggle to switch between 8 MHz and 16 MHz.
<br>My setup is the following:
<br>
</p>
<pre>
                      8 MHz      ____
(now empty) hole -&gt;  o----------|    |  /
                                |    | /    ______  16 MHz
                     |----------|    |/    |      |
 |_|_|_|_|_|_|_|_|_|_|_|_|_|   _|    |     |   _|_|_|_|_|_|_|_|_|_|_|_
|                    *      | | |____|     |  |   *
|&gt; WD 1772 02-02            | | switch     |  |&gt;     CO25914
|___________________________| |____________|  |_______________________
 | | | | | | | | | | | | | |                    | | | | | | | | | | |

</pre>
<p>Formatting programs:
<br>
</p>
<p>- Diamond Format (HD 3 1/2&quot;, 18 &amp; 20 sectors per track,
IBM boot sector)
<br>- H-Copy (HD 3 1/2&quot; &amp; 5 1/4&quot;, selectable number of
sectors)
<br>
</p>
<p>Note that the normal formatting routine from the desktop will only
give you DSDD disks. This is because the HD formatting routine was not
built into TOS until TOS 2.6. You *MUST* use a software formatter or
have pre-formatted disks.
<br>
</p>
<p>Problems you may encounter: &quot;Damage on drive XX; check
connections..&quot;
<br>
</p>
<p>- On 3 1/2&quot; floppies, change step rate for drive to 6ms or
12ms (Double Click's &quot;Floppy Configurator&quot; is great for
this). Reason: when you double the clock rate, the step rate is
halved.
<br>
<br>
</p>
<p>- On 5 1/4&quot; disk drives, change step rate for drive.
Additionally, you may need to construct an interface to provide the
necessary logic and buffering for the drive select and motor on
signals. (1997 note: I can dig this out if anyone is interested).
<br>
<br>- IBM-compatible floppy drive may not work in an Atari. Check
first to see if it works as a normal Double-Sided Double-Density
(720K) drive (no modification necessary - just plug it in after
changing drive number to &quot;0&quot;). If the floppy drive light
stays on all the time, the floppy drive cable is in upside down. If it
doesn't work as a 720K drive, it probably will not work as a 1.44
drive unless you can set the jumpers and configure the darned thing
(you would have to figure out how to do it on an individual basis).
(1997 note: most of the recently manufactured HD floppies do not have
any settable jumpers and may not work in this mod.)
<br>
<br>Usual disclaimer:
<br>I have successfully installed this modification in a MegaST (TOS
1.4, 6-chip set) and a later-model STFM (TOS 1.2, 2-chip set). I do
not know if it will work with TOS 1.0. I cannot accept any
responsibility for any damage to your ST.
<br>
<br>
<br>
</p>
<p><tt> Modification for 1.44 MB Floppydisk </tt>
<br>
<br>Zaphod Beeblebrox's notes on using Pc 1.44 Mb 3.5&quot; drives
with ST/STE's with a minimum of trouble. If you have Tos v2.06 and
STE, even the TOS will recognize that you have an 1.44 drive installed
as your internal drive!!! Version 1.1
<br>
</p>
<p>This whole thing started a few days ago, when I decided that I was
fed-up with all those 720 Kb disks, I needed something better for
backing up all the wares from my BBS, and I thought.... Hmm, wait a
sec, the Pc dudes have 1.44 drives in their computers, and so does the
Mega STE.... Why not install one in my &quot;normal&quot; STE as
well??? Then I started planning for the project, and came to this
conclusion:
<br>
</p>
<p>1.
<br>You must have a WD1772-02-02, the other ones will not handle the
doubled clock frequency of 16 mHz without problems.
<br>
</p>
<p>2.
<br>Your 1.44 Mb diskdrive must output a signal on pin 2 (HD detect)
whenever a HD disk is present in the drive. Examples of drives that
works fine with this modification: TEAC and Panasonic. I used a
Panasonic drive for my own computer. Not all drives have the jumpers
set-up correctly when you buy them, so *NEVER* buy a drive if they
cannot tell you fer sure that it really has the HD detect signal
output. Because if it doesn't have it, you're fucked up!!
<br>
</p>
<p>3.
<br>You must have some kind of circuit that only enables 16 mHz when
drive 0 is selected and a HD disk is present in drive 0
<br>
</p>
<p>4.
<br>If you have a STE, you should also solder a jumper on bridge E6
underneath the drive in order to get TOS to recognize that you have a
1.44 Mb drive.
<br>
</p>
<p><b> The Circuit: </b>
<br>
</p>
<p>I designed my automatical HD detect switch around a 74LS00 and a
74F157. The LS00 is a quadruple NAND gate, and the F157 is a dual
two-to-one multiplexer. The first thing you need to do, is to invert
the HD detect signal with one of the NAND gates, you simply feed the
HD detect on both inputs of one of the NAND gates and there you have
it - inverted HD detect on the output of that NAND gate!!!! What you
do now, is that you take the drive B select signal and the inverted HD
detect signal and feed them onto the inputs of a second NAND gate.
Now, you'll only get a '0' output from the second NAND gate if
<br>
</p>
<p>* Drive B is not selected
<br>* Drive A contains a HD disk
<br>
</p>
<p>After this, we simly feed the output of the second nand gate to
the select input on the F157 multiplexer. This means that the
conditions above will select 16 mHz clock for the FDC, and all other
conditions will select the standard 8 mHz clock. Easy, isn't it???
Now, I will present you with the actual circuitry.... Remember that
the wires are only joined where I have &quot;+&quot; signs, other
wires are just crossing each other. It's very importanf that you get
tha 74F157 and not anything slower. the 74LS157 cannot handle more
than about 14-15 mHz and we need something that will switch 16 mHz
without problems.
<br>
<br>
</p>
<pre>

     +--------+  +-----------------------+
     |        |  |                       |
     |        |  |  |  |  |  |  |  |     |
     |      --------------------------   |
     |      !                        !   |
     |      !                        !   |
     |      \         74F157         !   |
     |      /       MULTIPLEXER      !   |
     |      !                        !   |
     |      !                        !   |
     |      --------------------------   |
     |        |  |  |  |  |  |  |  |     |
     |   +----+  |  |  |           +-+---+
     |   |       |  |  |             |
     |   |       |  |  +---------------------------+
     |   |       |  |                |             |
     +---|----+  |  +--------------------------+   |
     |   |    |  |                   |         |   |
     |   |    |  +-------------------------+   |   |
     |   |    |                      |     |   |   |
     |   |    |  |  |  |  |  |  |    |     |   |   |
     |   |  -----------------------  |     |   |   |
     |   |  !                     !  |     |   |   |
     |   |  !                     !  |     |   |   |
     |   |  \        74LS00       !  |     |   |   |
     |   |  /    QUAD NAND GATE   !  |     |   |   |
     |   |  !                     !  |     |   |   |
     |   |  !                     !  |     |   |   |
     |   |  -----------------------  |     |   |   |
     |   |    |  |  |  |  |  |  |    |     |   |   |
     |   |    |  |  |  +--+  |  +----+     |   |   |
     |   |    |  |  |  |     |  |          |   |   |
     |   |    |  +--|--------+  |          |   |   |
     |   |    |     |  |        |          |   |   |
     |   +----------+  |        |          |   |   |
     |        |        |        |          |   |   |
     |        |        |        |          |   |   |
     *        *        *        *          *   *   *
     +5V     D1S      HDD      GND       16M  8M  FDC

What do all these abbreviations stand for?? Well....

</pre>
<p>
<br>+5V is the juice required for our little gadget... Get this from
Pin 15 of the WD1772-02-02 chip.... GND is ground, which you can get
from Pin 14 of the WD1772-02-02... D1S is drive B select, which is Pin
19 of the YM2149 soundchip. HDD is pin 2 of the diskdrive ribbon
cable. It's the wire right besides the red marked wire, which is
number one. That is, HD detect is wire tapped from Pin 52 of the STE
videoshifter, or Pin 2 of the STE MCGLUE (The big 144 pin surface
mounted, not a very good idea, but if you follow the trace from Pin 2
of it, you'll discover the correct thru-hole where you should tap the
16 mHz signal, it's located right between the videoshifter and the
SIMM memory modules on the motherboard). FDC is the WD1772 clock
signal, which can be found on Pin 18 of the Floppydisk controller. 8M
is the 8 mHz signal, which can be tapped from the old pin 18 hole, or
a thru-hole near the WD1772 socket. Or you might also tap the 8 mHz
signal from pin 15 of the MC68000 <a href="080108.htm" target="UDOcon">CPU</a>.
<br>
</p>
<p>This has been another Control Team production, presented to you by
Zaphod Beeblebrox of The Control Team. This project worked just fine
for me, but I will not accept any responsibility if your computer
turns itself into a toaster while performing this hardware
modification. By the way, if you like my work, you're welcome to send
me a donation if you want to... (HAHAHAHA!!!). You can reach me at any
of the Control Team boards:
<br>
</p>
<p>Eagles Nest BBS +46-18-262804 (235 Megs and HST Dual Standard).
<br>Data Control I. +1-(818)/558-5636 (200 Megs + 88*x Syquest and
HST).
<br>
</p>
<p>Or send me a snailmail at this address:
<br>
</p>
<p>Carl Andersson
<br>Liggargatan 5J
<br>754 20 Uppsala
<br>Sweden
<br>
</p>
<p>
<br>
<br>
</p>
<p align=center><img src="image/sline.gif" border=0 width="640" height="2"></p><br>
<p align=center><img src="image/img.gif" border=0 width="50" height="40"></p><br>
<ul>
<li>11.3.1 <a href="0b0301.htm" target="UDOcon">HD Disk STe</a></li>
<li>11.3.2 <a href="0b0302.htm" target="UDOcon">HD Floppy / MegaST</a></li>
<li>11.3.3 <a href="0b0303.htm" target="UDOcon">HD Switch</a></li>
<li>11.3.4 <a href="0b0304.htm" target="UDOcon">FAB HD Modul</a></li>
<li>11.3.5 <a href="0b0305.htm" target="UDOcon">HD Modul</a></li>
<li>11.3.6 <a href="0b0306.htm" target="UDOcon">ED Modul</a></li>
</ul>
<br>

<hr>
<address>Copyright &copy; <a href="http://www.doitarchive.de/">Robert Schaffner</a> (<a href="mailto:doit@doitarchive.de">doit@doitarchive.de</a>)<br>
Letzte Aktualisierung am 23. Mai 2004</address>
</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" border=0 width="24" height="24"></a>
<a href="0b.htm" target="UDOcon"><img src="udo_up.gif" alt="Diskettenlaufwerke" border=0 width="24" height="24"></a>
<a href="0b0201.htm" target="UDOcon"><img src="udo_lf.gif" alt="DD-HD Switch" border=0 width="24" height="24"></a>
<a href="0b0301.htm" target="UDOcon"><img src="udo_rg.gif" alt="HD Disk STe" border=0 width="24" height="24"></a>
</td></tr></table>
</body></html>
